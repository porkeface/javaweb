
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>d1tools.com</title>
	<style type="text/css">
		
[data-color-mode*='light'], [data-color-mode*='light'] body, .markdown-body[theme*='light'] {
  --color-prettylights-syntax-comment: #6e7781;
  --color-prettylights-syntax-constant: #0550ae;
  --color-prettylights-syntax-entity: #8250df;
  --color-prettylights-syntax-storage-modifier-import: #24292f;
  --color-prettylights-syntax-entity-tag: #116329;
  --color-prettylights-syntax-keyword: #cf222e;
  --color-prettylights-syntax-string: #0a3069;
  --color-prettylights-syntax-variable: #953800;
  --color-prettylights-syntax-brackethighlighter-unmatched: #82071e;
  --color-prettylights-syntax-invalid-illegal-text: #f6f8fa;
  --color-prettylights-syntax-invalid-illegal-bg: #82071e;
  --color-prettylights-syntax-carriage-return-text: #f6f8fa;
  --color-prettylights-syntax-carriage-return-bg: #cf222e;
  --color-prettylights-syntax-string-regexp: #116329;
  --color-prettylights-syntax-markup-list: #3b2300;
  --color-prettylights-syntax-markup-heading: #0550ae;
  --color-prettylights-syntax-markup-italic: #24292f;
  --color-prettylights-syntax-markup-bold: #24292f;
  --color-prettylights-syntax-markup-deleted-text: #82071e;
  --color-prettylights-syntax-markup-deleted-bg: #FFEBE9;
  --color-prettylights-syntax-markup-inserted-text: #116329;
  --color-prettylights-syntax-markup-inserted-bg: #dafbe1;
  --color-prettylights-syntax-markup-changed-text: #953800;
  --color-prettylights-syntax-markup-changed-bg: #ffd8b5;
  --color-prettylights-syntax-markup-ignored-text: #eaeef2;
  --color-prettylights-syntax-markup-ignored-bg: #0550ae;
  --color-prettylights-syntax-meta-diff-range: #8250df;
  --color-prettylights-syntax-brackethighlighter-angle: #57606a;
  --color-prettylights-syntax-sublimelinter-gutter-mark: #8c959f;
  --color-prettylights-syntax-constant-other-reference-link: #0a3069;
  --color-fg-default: #24292f;
  --color-fg-muted: #57606a;
  --color-fg-subtle: #6e7781;
  --color-canvas-default: #ffffff;
  --color-canvas-subtle: #f6f8fa;
  --color-border-default: #d0d7de;
  --color-border-muted: hsla(210,18%,87%,1);
  --color-neutral-muted: rgba(175,184,193,0.2);
  --color-accent-fg: #0969da;
  --color-accent-emphasis: #0969da;
  --color-attention-subtle: #fff8c5;
  --color-danger-fg: #cf222e;
}
[data-color-mode*='dark'], [data-color-mode*='dark'] body, .markdown-body[theme*='dark'] {
  --color-prettylights-syntax-comment: #8b949e;
  --color-prettylights-syntax-constant: #79c0ff;
  --color-prettylights-syntax-entity: #d2a8ff;
  --color-prettylights-syntax-storage-modifier-import: #c9d1d9;
  --color-prettylights-syntax-entity-tag: #7ee787;
  --color-prettylights-syntax-keyword: #ff7b72;
  --color-prettylights-syntax-string: #a5d6ff;
  --color-prettylights-syntax-variable: #ffa657;
  --color-prettylights-syntax-brackethighlighter-unmatched: #f85149;
  --color-prettylights-syntax-invalid-illegal-text: #f0f6fc;
  --color-prettylights-syntax-invalid-illegal-bg: #8e1519;
  --color-prettylights-syntax-carriage-return-text: #f0f6fc;
  --color-prettylights-syntax-carriage-return-bg: #b62324;
  --color-prettylights-syntax-string-regexp: #7ee787;
  --color-prettylights-syntax-markup-list: #f2cc60;
  --color-prettylights-syntax-markup-heading: #1f6feb;
  --color-prettylights-syntax-markup-italic: #c9d1d9;
  --color-prettylights-syntax-markup-bold: #c9d1d9;
  --color-prettylights-syntax-markup-deleted-text: #ffdcd7;
  --color-prettylights-syntax-markup-deleted-bg: #67060c;
  --color-prettylights-syntax-markup-inserted-text: #aff5b4;
  --color-prettylights-syntax-markup-inserted-bg: #033a16;
  --color-prettylights-syntax-markup-changed-text: #ffdfb6;
  --color-prettylights-syntax-markup-changed-bg: #5a1e02;
  --color-prettylights-syntax-markup-ignored-text: #c9d1d9;
  --color-prettylights-syntax-markup-ignored-bg: #1158c7;
  --color-prettylights-syntax-meta-diff-range: #d2a8ff;
  --color-prettylights-syntax-brackethighlighter-angle: #8b949e;
  --color-prettylights-syntax-sublimelinter-gutter-mark: #484f58;
  --color-prettylights-syntax-constant-other-reference-link: #a5d6ff;
  --color-fg-default: #c9d1d9;
  --color-fg-muted: #8b949e;
  --color-fg-subtle: #484f58;
  --color-canvas-default: #0d1117;
  --color-canvas-subtle: #161b22;
  --color-border-default: #30363d;
  --color-border-muted: #21262d;
  --color-neutral-muted: rgba(110,118,129,0.4);
  --color-accent-fg: #58a6ff;
  --color-accent-emphasis: #1f6feb;
  --color-attention-subtle: rgba(187,128,9,0.15);
  --color-danger-fg: #f85149;
}

.markdown-body {
  display: block;
  -webkit-text-size-adjust: 100%;
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word;
  color: var(--color-fg-default);
  background-color: var(--color-canvas-default);
}

.markdown-body details,
.markdown-body figcaption,
.markdown-body figure {
  display: block;
}

.markdown-body summary {
  display: list-item;
}

.markdown-body [hidden] {
  display: none !important;
}

.markdown-body a {
  background-color: transparent;
  color: var(--color-accent-fg);
  text-decoration: none;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline-width: 0;
}

.markdown-body abbr[title] {
  border-bottom: none;
  text-decoration: underline dotted;
}

.markdown-body b,
.markdown-body strong {
  font-weight: 600;
}

.markdown-body dfn {
  font-style: italic;
}

.markdown-body h1 {
  margin: .67em 0;
  font-weight: 600;
  padding-bottom: .3em;
  font-size: 2em;
  border-bottom: 1px solid var(--color-border-muted);
}

.markdown-body mark {
  background-color: var(--color-attention-subtle);
  color: var(--color-text-primary);
}

.markdown-body small {
  font-size: 90%;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body sup {
  top: -0.5em;
}

.markdown-body img {
  border-style: none;
  max-width: 100%;
  box-sizing: content-box;
  background-color: var(--color-canvas-default);
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace,monospace;
  font-size: 1em;
}

.markdown-body figure {
  margin: 1em 40px;
}

.markdown-body hr {
  box-sizing: content-box;
  overflow: hidden;
  background: transparent;
  border-bottom: 1px solid var(--color-border-muted);
  height: .25em;
  padding: 0;
  margin: 24px 0;
  background-color: var(--color-border-default);
  border: 0;
}

.markdown-body input {
  font: inherit;
  margin: 0;
  overflow: visible;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

.markdown-body [type=button],
.markdown-body [type=reset],
.markdown-body [type=submit] {
  -webkit-appearance: button;
}

.markdown-body [type=button]::-moz-focus-inner,
.markdown-body [type=reset]::-moz-focus-inner,
.markdown-body [type=submit]::-moz-focus-inner {
  border-style: none;
  padding: 0;
}

.markdown-body [type=button]:-moz-focusring,
.markdown-body [type=reset]:-moz-focusring,
.markdown-body [type=submit]:-moz-focusring {
  outline: 1px dotted ButtonText;
}

.markdown-body [type=checkbox],
.markdown-body [type=radio] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body [type=number]::-webkit-inner-spin-button,
.markdown-body [type=number]::-webkit-outer-spin-button {
  height: auto;
}

.markdown-body [type=search] {
  -webkit-appearance: textfield;
  outline-offset: -2px;
}

.markdown-body [type=search]::-webkit-search-cancel-button,
.markdown-body [type=search]::-webkit-search-decoration {
  -webkit-appearance: none;
}

.markdown-body ::-webkit-input-placeholder {
  color: inherit;
  opacity: .54;
}

.markdown-body ::-webkit-file-upload-button {
  -webkit-appearance: button;
  font: inherit;
}

.markdown-body a:hover {
  text-decoration: underline;
}

.markdown-body hr::before {
  display: table;
  content: "";
}

.markdown-body hr::after {
  display: table;
  clear: both;
  content: "";
}

.markdown-body table {
  border-spacing: 0;
  border-collapse: collapse;
  display: block;
  width: max-content;
  max-width: 100%;
  overflow: auto;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body details summary {
  cursor: pointer;
}

.markdown-body details:not([open])>*:not(summary) {
  display: none !important;
}

.markdown-body kbd {
  display: inline-block;
  padding: 3px 5px;
  font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  line-height: 10px;
  color: var(--color-fg-default);
  vertical-align: middle;
  background-color: var(--color-canvas-subtle);
  border: solid 1px var(--color-neutral-muted);
  border-bottom-color: var(--color-neutral-muted);
  border-radius: 6px;
  box-shadow: inset 0 -1px 0 var(--color-neutral-muted);
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
}

.markdown-body h2 {
  font-weight: 600;
  padding-bottom: .3em;
  font-size: 1.5em;
  border-bottom: 1px solid var(--color-border-muted);
}

.markdown-body h3 {
  font-weight: 600;
  font-size: 1.25em;
}

.markdown-body h4 {
  font-weight: 600;
  font-size: 1em;
}

.markdown-body h5 {
  font-weight: 600;
  font-size: .875em;
}

.markdown-body h6 {
  font-weight: 600;
  font-size: .85em;
  color: var(--color-fg-muted);
}

.markdown-body p {
  margin-top: 0;
  margin-bottom: 10px;
}

.markdown-body blockquote {
  margin: 0;
  padding: 0 1em;
  color: var(--color-fg-muted);
  border-left: .25em solid var(--color-border-default);
}

.markdown-body ul,
.markdown-body ol {
  margin-top: 0;
  margin-bottom: 0;
  padding-left: 2em;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body tt,
.markdown-body code {
  font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
  font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  font-size: 12px;
  word-wrap: normal;
}

.markdown-body .octicon {
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-body ::placeholder {
  color: var(--color-fg-subtle);
  opacity: 1;
}

.markdown-body input::-webkit-outer-spin-button,
.markdown-body input::-webkit-inner-spin-button {
  margin: 0;
  -webkit-appearance: none;
  appearance: none;
}

.markdown-body .token.comment, .markdown-body .token.prolog, .markdown-body .token.doctype, .markdown-body .token.cdata {
  color: var(--color-prettylights-syntax-comment);
}
.markdown-body .token.namespace { opacity: 0.7; }
.markdown-body .token.tag, .markdown-body .token.selector, .markdown-body .token.constant, .markdown-body .token.symbol, .markdown-body .token.deleted {
  color: var(--color-prettylights-syntax-entity-tag);
}
.markdown-body .token.maybe-class-name {
  color: var(--color-prettylights-syntax-variable);
}
.markdown-body .token.property-access, .markdown-body .token.operator, .markdown-body .token.boolean, .markdown-body .token.number, .markdown-body .token.selector .markdown-body .token.class, .markdown-body .token.attr-name, .markdown-body .token.string, .markdown-body .token.char, .markdown-body .token.builtin {
  color: var(--color-prettylights-syntax-constant);
}

.markdown-body .token.deleted {
  color: var(--color-prettylights-syntax-markup-deleted-text);
}
.markdown-body .token.property {
  color: var(--color-prettylights-syntax-constant);
}
.markdown-body .token.punctuation {
  color: var(--color-prettylights-syntax-markup-bold);
}
.markdown-body .token.function {
  color: var(--color-prettylights-syntax-entity);
}
.markdown-body .code-line .token.deleted {
  background-color: var(--color-prettylights-syntax-markup-deleted-bg);
}
.markdown-body .token.inserted {
  color: var(--color-prettylights-syntax-markup-inserted-text);
}
.markdown-body .code-line .token.inserted {
  background-color: var(--color-prettylights-syntax-markup-inserted-bg);
}

.markdown-body .token.variable {
  color: var(--color-prettylights-syntax-constant);
}
.markdown-body .token.entity, .markdown-body .token.url, .language-css .markdown-body .token.string, .style .markdown-body .token.string {
  color: var(--color-prettylights-syntax-string);
}
.markdown-body .token.color, .markdown-body .token.atrule, .markdown-body .token.attr-value, .markdown-body .token.function, .markdown-body .token.class-name {
  color: var(--color-prettylights-syntax-string);
}
.markdown-body .token.rule, .markdown-body .token.regex, .markdown-body .token.important, .markdown-body .token.keyword {
  color: var(--color-prettylights-syntax-keyword);
}
.markdown-body .token.coord {
  color: var(--color-prettylights-syntax-meta-diff-range);
}
.markdown-body .token.important, .markdown-body .token.bold { font-weight: bold; }
.markdown-body .token.italic { font-style: italic; }
.markdown-body .token.entity { cursor: help; }

.markdown-body [data-catalyst] {
  display: block;
}

.markdown-body g-emoji {
  font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  font-size: 1em;
  font-style: normal !important;
  font-weight: 400;
  line-height: 1;
  vertical-align: -0.075em;
}

.markdown-body g-emoji img {
  width: 1em;
  height: 1em;
}

.markdown-body::before {
  display: table;
  content: "";
}

.markdown-body::after {
  display: table;
  clear: both;
  content: "";
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body a:not([href]) {
  color: inherit;
  text-decoration: none;
}

.markdown-body .absent {
  color: var(--color-danger-fg);
}

.markdown-body a.anchor {
  float: left;
  padding-right: 4px;
  margin-left: -20px;
  line-height: 1;
}

.markdown-body a.anchor:focus {
  outline: none;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body details {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body sup>a::before {
  content: "[";
}

.markdown-body sup>a::after {
  content: "]";
}

.markdown-body .octicon-video {
  border: 1px solid #d0d7de !important;
  border-radius: 6px !important;
  display: block;
}

.markdown-body .octicon-video summary {
    border-bottom: 1px solid #d0d7de !important;
    padding: 8px 16px !important;
    cursor: pointer;
}

.markdown-body .octicon-video > video {
    display: block !important;
    max-width: 100% !important;
    padding: 2px;
    box-sizing: border-box;
    border-bottom-right-radius: 6px !important;
    border-bottom-left-radius: 6px !important;
}

.markdown-body details.octicon-video:not([open])>*:not(summary) {
    display: none !important;
}

.markdown-body details.octicon-video:not([open]) > summary {
    border-bottom: 0 !important;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
  color: var(--color-fg-default);
  vertical-align: middle;
  visibility: hidden;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
  text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
  visibility: visible;
}

.markdown-body h1 tt,
.markdown-body h1 code,
.markdown-body h2 tt,
.markdown-body h2 code,
.markdown-body h3 tt,
.markdown-body h3 code,
.markdown-body h4 tt,
.markdown-body h4 code,
.markdown-body h5 tt,
.markdown-body h5 code,
.markdown-body h6 tt,
.markdown-body h6 code {
  padding: 0 .2em;
  font-size: inherit;
}

.markdown-body ul.no-list,
.markdown-body ol.no-list {
  padding: 0;
  list-style-type: none;
}

.markdown-body ol[type="1"] {
  list-style-type: decimal;
}

.markdown-body ol[type=a] {
  list-style-type: lower-alpha;
}

.markdown-body ol[type=i] {
  list-style-type: lower-roman;
}

.markdown-body div>ol:not([type]) {
  list-style-type: decimal;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body li+li {
  margin-top: .25em;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: 600;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body table th {
  font-weight: 600;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid var(--color-border-default);
}

.markdown-body table tr {
  background-color: var(--color-canvas-default);
  border-top: 1px solid var(--color-border-muted);
}

.markdown-body table tr:nth-child(2n) {
  background-color: var(--color-canvas-subtle);
}

.markdown-body table img {
  background-color: transparent;
  vertical-align: middle;
}

.markdown-body img[align=right] {
  padding-left: 20px;
}

.markdown-body img[align=left] {
  padding-right: 20px;
}

.markdown-body .emoji {
  max-width: none;
  vertical-align: text-top;
  background-color: transparent;
}

.markdown-body span.frame {
  display: block;
  overflow: hidden;
}

.markdown-body span.frame>span {
  display: block;
  float: left;
  width: auto;
  padding: 7px;
  margin: 13px 0 0;
  overflow: hidden;
  border: 1px solid var(--color-border-default);
}

.markdown-body span.frame span img {
  display: block;
  float: left;
}

.markdown-body span.frame span span {
  display: block;
  padding: 5px 0 0;
  clear: both;
  color: var(--color-fg-default);
}

.markdown-body span.align-center {
  display: block;
  overflow: hidden;
  clear: both;
}

.markdown-body span.align-center>span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: center;
}

.markdown-body span.align-center span img {
  margin: 0 auto;
  text-align: center;
}

.markdown-body span.align-right {
  display: block;
  overflow: hidden;
  clear: both;
}

.markdown-body span.align-right>span {
  display: block;
  margin: 13px 0 0;
  overflow: hidden;
  text-align: right;
}

.markdown-body span.align-right span img {
  margin: 0;
  text-align: right;
}

.markdown-body span.float-left {
  display: block;
  float: left;
  margin-right: 13px;
  overflow: hidden;
}

.markdown-body span.float-left span {
  margin: 13px 0 0;
}

.markdown-body span.float-right {
  display: block;
  float: right;
  margin-left: 13px;
  overflow: hidden;
}

.markdown-body span.float-right>span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: right;
}

.markdown-body code,
.markdown-body tt {
  padding: .2em .4em;
  margin: 0;
  font-size: 85%;
  background-color: var(--color-neutral-muted);
  border-radius: 6px;
}

.markdown-body code br,
.markdown-body tt br {
  display: none;
}

.markdown-body del code {
  text-decoration: inherit;
}

.markdown-body pre code {
  font-size: 100%;
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body pre {
  position: relative;
  font-size: 85%;
  line-height: 1.45;
  background-color: var(--color-canvas-subtle);
  border-radius: 6px;
}

.markdown-body pre code,
.markdown-body pre tt {
  display: inline;
  max-width: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre > code {
  padding: 16px;
  overflow: auto;
  display: block;
}

.markdown-body .csv-data td,
.markdown-body .csv-data th {
  padding: 5px;
  overflow: hidden;
  font-size: 12px;
  line-height: 1;
  text-align: left;
  white-space: nowrap;
}

.markdown-body .csv-data .blob-num {
  padding: 10px 8px 9px;
  text-align: right;
  background: var(--color-canvas-default);
  border: 0;
}

.markdown-body .csv-data tr {
  border-top: 0;
}

.markdown-body .csv-data th {
  font-weight: 600;
  background: var(--color-canvas-subtle);
  border-top: 0;
}

.markdown-body .footnotes {
  font-size: 12px;
  color: var(--color-fg-muted);
  border-top: 1px solid var(--color-border-default);
}

.markdown-body .footnotes ol {
  padding-left: 16px;
}

.markdown-body .footnotes li {
  position: relative;
}

.markdown-body .footnotes li:target::before {
  position: absolute;
  top: -8px;
  right: -8px;
  bottom: -8px;
  left: -24px;
  pointer-events: none;
  content: "";
  border: 2px solid var(--color-accent-emphasis);
  border-radius: 6px;
}

.markdown-body .footnotes li:target {
  color: var(--color-fg-default);
}

.markdown-body .footnotes .data-footnote-backref g-emoji {
  font-family: monospace;
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item label {
  font-weight: 400;
}

.markdown-body .task-list-item.enabled label {
  cursor: pointer;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item .handle {
  display: none;
}

.markdown-body .task-list-item-checkbox,
.markdown-body input[type="checkbox"] {
  margin: 0 .2em .25em -1.6em;
  vertical-align: middle;
}

.markdown-body .contains-task-list:dir(rtl) .task-list-item-checkbox,
.markdown-body .contains-task-list:dir(rtl) input[type="checkbox"] {
  margin: 0 -1.6em .25em .2em;
}

.markdown-body ::-webkit-calendar-picker-indicator {
  filter: invert(50%);
}
body {padding: 2em;}
	</style>
  </head>
  <body>
  <div class="markdown-body">
    <h1 align="center">Web A 考点整理</h1>
<h2>一、选择题（14×2）</h2>
<h3>1、HTML form标签使用</h3>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1">    <span class="token comment">&lt;!-- form 标签开始 --&gt;</span>
</span><span class="code-line line-number" line="2">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/register<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>application/x-www-form-urlencoded<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3">        
</span><span class="code-line line-number" line="4">        <span class="token comment">&lt;!-- 文本输入框 --&gt;</span>
</span><span class="code-line line-number" line="5">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="6">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>用户名:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="7">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">required</span> 
</span></span><span class="code-line line-number" line="8"><span class="token tag">                   <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>请输入用户名<span class="token punctuation">"</span></span> <span class="token attr-name">minlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="9">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="10">        
</span><span class="code-line line-number" line="11">        <span class="token comment">&lt;!-- 密码输入框 --&gt;</span>
</span><span class="code-line line-number" line="12">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="13">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>密码:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="14">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">required</span>
</span></span><span class="code-line line-number" line="15"><span class="token tag">                   <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>请输入密码<span class="token punctuation">"</span></span> <span class="token attr-name">minlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="16">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="17">        
</span><span class="code-line line-number" line="18">        <span class="token comment">&lt;!-- 邮箱输入框 --&gt;</span>
</span><span class="code-line line-number" line="19">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="20">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>电子邮箱:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="21">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">required</span>
</span></span><span class="code-line line-number" line="22"><span class="token tag">                   <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example@domain.com<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="23">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="24">        
</span><span class="code-line line-number" line="25">        <span class="token comment">&lt;!-- 单选按钮 --&gt;</span>
</span><span class="code-line line-number" line="26">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="27">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>性别:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="28">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>male<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token punctuation">&gt;</span></span> 男<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="29">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>female<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> 女<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="30">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="31">        
</span><span class="code-line line-number" line="32">        <span class="token comment">&lt;!-- 下拉选择框 --&gt;</span>
</span><span class="code-line line-number" line="33">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="34">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>country<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>国家/地区:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="35">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>country<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>country<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="36">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>--请选择--<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="37">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>china<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>中国<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="38">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usa<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>美国<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="39">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uk<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>英国<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="40">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="41">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="42">        
</span><span class="code-line line-number" line="43">        <span class="token comment">&lt;!-- 多选框 --&gt;</span>
</span><span class="code-line line-number" line="44">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="45">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>兴趣爱好:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="46">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hobbies<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reading<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> 阅读<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="47">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hobbies<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sports<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> 运动<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="48">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hobbies<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>music<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> 音乐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="49">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="50">        
</span><span class="code-line line-number" line="51">        <span class="token comment">&lt;!-- 文件上传 --&gt;</span>
</span><span class="code-line line-number" line="52">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="53">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>头像上传:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="54">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">accept</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/*<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="55">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="56">        
</span><span class="code-line line-number" line="57">        <span class="token comment">&lt;!-- 隐藏域 --&gt;</span>
</span><span class="code-line line-number" line="58">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>token<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>abc123xyz<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="59">        
</span><span class="code-line line-number" line="60">        <span class="token comment">&lt;!-- 提交按钮 --&gt;</span>
</span><span class="code-line line-number" line="61">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>注册<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="62">        
</span><span class="code-line line-number" line="63">        <span class="token comment">&lt;!-- 重置按钮 --&gt;</span>
</span><span class="code-line line-number" line="64">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reset<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>重置<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="65">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="66">    <span class="token comment">&lt;!-- form 标签结束 --&gt;</span>
</span></code></pre>
<ul>
<li>
<h4>action属性（定义提交到哪）</h4>
<blockquote>
<h5><strong>action 属性的基本定义</strong></h5>
<ul>
<li><code>action</code> 是 HTML <code>&lt;form&gt;</code> 标签的一个<strong>必需属性</strong>，它用于指定当用户提交表单时，表单数据应该发送到哪个服务器端程序或页面进行处理。</li>
</ul>
<h5><strong>action 属性的语法</strong></h5>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>URL<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2">  <span class="token comment">&lt;!-- 表单内容 --&gt;</span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<h5><strong>action 属性的取值</strong></h5>
<blockquote>
<h6><strong>(1) 绝对 URL</strong></h6>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://example.com/process-form.php<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<ul>
<li>提交到其他网站的指定地址</li>
<li>需要完整的协议和域名</li>
</ul>
<h6><strong>(2) 相对 URL（最常用）</strong></h6>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/submit-data<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>process.php<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../handlers/save-info<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<ul>
<li>提交到当前网站的不同路径</li>
<li>可以是相对于当前页面的路径</li>
</ul>
<h6><strong>(3) 空值或当前页面</strong></h6>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<ul>
<li>提交到当前页面本身</li>
<li>常用于表单自处理（如PHP中检查<code>$_SERVER["REQUEST_METHOD"]</code>）</li>
</ul>
</blockquote>
<h5>action 属性的工作原理</h5>
<ol>
<li>用户在表单中输入数据</li>
<li>点击提交按钮</li>
<li>浏览器收集表单数据</li>
<li>按照<code>action</code>指定的URL发送数据</li>
<li>服务器端程序接收并处理数据</li>
</ol>
<h5>实际应用示例</h5>
<blockquote>
<h6>示例1：提交到PHP处理页面</h6>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>process_login.php<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2">用户名: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3">密码: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="4"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>登录<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="5"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<h6>示例2：提交到API接口</h6>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://api.example.com/users<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2"><span class="token comment">&lt;!-- 注册表单内容 --&gt;</span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<h6>示例3：当前页面处理</h6>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token comment">&lt;!-- 假设这是index.php文件 --&gt;</span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="4"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>搜索<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="5"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token prolog">&lt;?php
</span></span><span class="code-line line-number" line="8"><span class="token prolog">if ($_SERVER["REQUEST_METHOD"] == "POST") {
</span></span><span class="code-line line-number" line="9"><span class="token prolog"> // 处理表单提交
</span></span><span class="code-line line-number" line="10"><span class="token prolog"> $searchTerm = $_POST["search"];
</span></span><span class="code-line line-number" line="11"><span class="token prolog"> // 执行搜索逻辑...
</span></span><span class="code-line line-number" line="12"><span class="token prolog">}
</span></span><span class="code-line line-number" line="13"><span class="token prolog">?&gt;</span>
</span></code></pre>
</blockquote>
<h5><strong>文件上传</strong></h5>
<ul>
<li>
<p>如需上传文件，除了设置action外，还需要：</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload.php<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
</li>
</ul>
</blockquote>
</li>
<li>
<h4><strong>method属性（定义提交方式）</strong></h4>
<blockquote>
<p><code>method</code> 是 HTML <code>&lt;form&gt;</code> 标签的关键属性，它定义了<strong>表单数据如何发送到服务器</strong>。它决定了HTTP请求的类型，直接影响数据如何传输以及如何在服务器端接收这些数据。</p>
<p>get、post两种请求方式</p>
<h5>method 属性的可选值</h5>
<h6>(1) GET 方法（默认值）</h6>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/search<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<h6>(2) POST 方法</h6>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<h5>GET 与 POST 的核心区别</h5>























































<table><thead><tr><th align="left">特性</th><th align="left">GET 方法</th><th align="left">POST 方法</th></tr></thead><tbody><tr><td align="left"><strong>数据位置</strong></td><td align="left">附加在URL之后(?name=value)</td><td align="left">包含在HTTP请求体中</td></tr><tr><td align="left"><strong>可见性</strong></td><td align="left">在浏览器地址栏可见</td><td align="left">不可见</td></tr><tr><td align="left"><strong>安全性</strong></td><td align="left">较低（历史记录可查）</td><td align="left">较高</td></tr><tr><td align="left"><strong>数据长度限制</strong></td><td align="left">有限制（约2048字符）</td><td align="left">无限制</td></tr><tr><td align="left"><strong>缓存</strong></td><td align="left">可被缓存</td><td align="left">不会被缓存</td></tr><tr><td align="left"><strong>后退/刷新行为</strong></td><td align="left">无害</td><td align="left">会重新提交数据</td></tr><tr><td align="left"><strong>书签</strong></td><td align="left">可收藏为书签</td><td align="left">不可收藏</td></tr><tr><td align="left"><strong>幂等性</strong></td><td align="left">幂等（多次执行结果相同）</td><td align="left">非幂等</td></tr><tr><td align="left"><strong>典型用途</strong></td><td align="left">获取数据（搜索、筛选）</td><td align="left">提交数据（登录、注册、修改）</td></tr></tbody></table>
<h5>GET 方法详解</h5>
<blockquote>
<h6>特点：</h6>
</blockquote>
<blockquote>
<ul>
<li>表单数据附加在URL后，格式为：<code>?name1=value1&amp;name2=value2</code></li>
<li>适合不敏感的小量数据传输</li>
<li>可以被书签保存</li>
</ul>
</blockquote>
<blockquote>
<h6>示例：</h6>
</blockquote>
<blockquote>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/search<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2">搜索词: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>q<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>搜索<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="4"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
</blockquote>
<blockquote>
<p>提交后URL变为：<code>/search?q=用户输入的词</code></p>
</blockquote>
<blockquote>
<h6>适用场景：</h6>
</blockquote>
<blockquote>
<ol>
<li>搜索引擎查询</li>
<li>商品筛选过滤</li>
<li>分页导航</li>
<li>数据查询操作</li>
</ol>
</blockquote>
<h5>POST 方法详解</h5>
<blockquote>
<h6>特点：</h6>
</blockquote>
<blockquote>
<ul>
<li>数据包含在HTTP请求体中</li>
<li>适合传输敏感信息或大量数据</li>
<li>支持文件上传</li>
</ul>
</blockquote>
<blockquote>
<h6>示例：</h6>
</blockquote>
<blockquote>
<form action="/register" method="post">
用户名: <input type="text" name="username">
密码: <input type="password" name="password">
<input type="submit" value="注册">
</form>
</blockquote>
</blockquote>
</li>
</ul>
<h3>2、tomcat的默认端口是什么</h3>
<blockquote>
<p>Tomcat服务器的默认端口是<code>8080</code>,这意味着</p>
<ul>
<li>
<p>运行 <code>startup.bat</code> 文件</p>
</li>
<li>
<p>启动 Tomcat 后，可通过以下地址访问：</p>
</li>
<li>
<p><code>http://localhost:8080</code> 来查看 Tomcat 的默认页面。</p>
</li>
</ul>
</blockquote>
<ul>
<li>
<h4>修改 Tomcat 的默认端口号</h4>
<blockquote>
<ul>
<li>
<p>有时，8080 端口可能会被其他应用程序占用，这时可以修改 Tomcat 的默认端口号。</p>
</li>
<li>
<p>修改步骤：</p>
</li>
<li>
<p>找到 <code>server.xml</code> 文件：在 Tomcat 的安装目录下，找到 <code>conf</code> 文件夹，打开其中的 <code>server.xml</code> 文件。</p>
</li>
<li>
<p>修改端口：在 <code>server.xml</code> 文件中，找到如下内容并修改：</p>
<pre class="language-xml"><code class="language-xml code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8080<span class="token punctuation">"</span></span>
</span></span><span class="code-line line-number" line="2"><span class="token tag">           <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HTTP/1.1<span class="token punctuation">"</span></span>
</span></span><span class="code-line line-number" line="3"><span class="token tag">           <span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20000<span class="token punctuation">"</span></span>
</span></span><span class="code-line line-number" line="4"><span class="token tag">           <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8443<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre>
</li>
<li>
<p>将端口号改为其他未被占用的端口号，例如 8081。</p>
</li>
</ul>
</blockquote>
</li>
<li>
<h4>启动并验证 Tomcat</h4>
<blockquote>
<ul>
<li><code>server.xml</code> 文件修改后，然后重启 Tomcat 服务器。</li>
<li>运行 <code>startup.bat</code> 来重启服务器。</li>
<li>验证端口号，可以通过新的端口号访问 Tomcat，例如：</li>
<li><code>http://localhost:8081</code>。</li>
</ul>
</blockquote>
</li>
<li>
<h4>查看端口占用情况</h4>
</li>
</ul>
<blockquote>
<ul>
<li>
<p>端口号范围：端口号的范围是 0 到 65535，但建议不要使用 1000 以内的端口号，因为这些端口通常被系统或保留使用。</p>
</li>
<li>
<p>检查端口占用：</p>
</li>
<li>
<p>窗口命令：<code>netstat -ano</code> 查看当前使用的端口号。</p>
</li>
<li>
<p>窗口端口占用情况：</p>
<pre><code class="code-highlight"><span class="code-line line-number" line="1">C:\Users\FYY6&gt;netstat -ano
</span><span class="code-line line-number" line="2">活动连接
</span><span class="code-line line-number" line="3">  协议  本地地址          外部地址        状态           PID
</span><span class="code-line line-number" line="4">  TCP    0.0.0.0:80             0.0.0.0:0              LISTENING       104792
</span><span class="code-line line-number" line="5">  TCP    0.0.0.0:135            0.0.0.0:0              LISTENING       1608
</span><span class="code-line line-number" line="6">  TCP    0.0.0.0:443            0.0.0.0:0              LISTENING       104792
</span><span class="code-line line-number" line="7">  TCP    0.0.0.0:445            0.0.0.0:0              LISTENING       4
</span><span class="code-line line-number" line="8">  TCP    0.0.0.0:1433           0.0.0.0:0              LISTENING       8380
</span><span class="code-line line-number" line="9">  TCP    0.0.0.0:5040           0.0.0.0:0              LISTENING       7688
</span><span class="code-line line-number" line="10">  TCP    0.0.0.0:5357           0.0.0.0:0              LISTENING       4
</span><span class="code-line line-number" line="11">  TCP    0.0.0.0:7680           0.0.0.0:0              LISTENING       4880
</span><span class="code-line line-number" line="12">  TCP    0.0.0.0:9197           0.0.0.0:0              LISTENING       5524
</span><span class="code-line line-number" line="13">  TCP    0.0.0.0:27000          0.0.0.0:0              LISTENING       5616
</span><span class="code-line line-number" line="14">  TCP    0.0.0.0:49664          0.0.0.0:0              LISTENING       1336
</span><span class="code-line line-number" line="15">  TCP    0.0.0.0:49665          0.0.0.0:0              LISTENING       1240
</span><span class="code-line line-number" line="16">  TCP    0.0.0.0:49668          0.0.0.0:0              LISTENING       2664
</span><span class="code-line line-number" line="17">  TCP    0.0.0.0:49669          0.0.0.0:0              LISTENING       3448
</span><span class="code-line line-number" line="18">  TCP    0.0.0.0:49672          0.0.0.0:0              LISTENING       4628
</span><span class="code-line line-number" line="19">  TCP    0.0.0.0:49711          0.0.0.0:0              LISTENING       1320
</span><span class="code-line line-number" line="20">  TCP    0.0.0.0:56571          0.0.0.0:0              LISTENING       58892
</span><span class="code-line line-number" line="21">  TCP    0.0.0.0:58612          0.0.0.0:0              LISTENING       110504
</span><span class="code-line line-number" line="22">  TCP    127.0.0.1:1434         0.0.0.0:0              LISTENING       8380
</span><span class="code-line line-number" line="23">  TCP    127.0.0.1:4709         0.0.0.0:0              LISTENING       58892
</span><span class="code-line line-number" line="24">  TCP    127.0.0.1:5283         0.0.0.0:0              LISTENING       82464
</span><span class="code-line line-number" line="25">  TCP    127.0.0.1:5354         0.0.0.0:0              LISTENING       5204
</span><span class="code-line line-number" line="26">  TCP    127.0.0.1:5354         127.0.0.1:49682        ESTABLISHED     5204
</span><span class="code-line line-number" line="27">  TCP    127.0.0.1:5354         127.0.0.1:49683        ESTABLISHED     5204
</span><span class="code-line line-number" line="28">  TCP    127.0.0.1:8681         0.0.0.0:0              LISTENING       110856
</span></code></pre>
</li>
</ul>
</blockquote>
<h3>3、javabean标签的使用</h3>
<ul>
<li>
<h4>标准JavaBean</h4>
</li>
</ul>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// User.java</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">    
</span><span class="code-line line-number" line="8">    <span class="token comment">// 必须有无参构造</span>
</span><span class="code-line line-number" line="9">    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">    
</span><span class="code-line line-number" line="11">    <span class="token comment">// getter和setter</span>
</span><span class="code-line line-number" line="12">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> username<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14">    
</span><span class="code-line line-number" line="15">    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> age<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17"><span class="token punctuation">}</span>
</span></code></pre>
<ul>
<li>
<h4>在JSP中使用</h4>
</li>
</ul>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
</span><span class="code-line line-number" line="2">&lt;html&gt;
</span><span class="code-line line-number" line="3">&lt;head&gt;
</span><span class="code-line line-number" line="4">    &lt;title&gt;JavaBean示例&lt;/title&gt;
</span><span class="code-line line-number" line="5">&lt;/head&gt;
</span><span class="code-line line-number" line="6">&lt;body&gt;
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">&lt;!-- 1. 创建Bean --&gt;
</span><span class="code-line line-number" line="9">&lt;jsp:useBean id="user" class="com.example.User" scope="session"/&gt;
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">&lt;!-- 2. 设置属性 --&gt;
</span><span class="code-line line-number" line="12">&lt;jsp:setProperty name="user" property="username" value="李四"/&gt;
</span><span class="code-line line-number" line="13">&lt;jsp:setProperty name="user" property="age" value="25"/&gt;
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">&lt;!-- 3. 获取属性 --&gt;
</span><span class="code-line line-number" line="16">&lt;h2&gt;用户信息：&lt;/h2&gt;
</span><span class="code-line line-number" line="17">&lt;p&gt;姓名：&lt;jsp:getProperty name="user" property="username"/&gt;&lt;/p&gt;
</span><span class="code-line line-number" line="18">&lt;p&gt;年龄：&lt;jsp:getProperty name="user" property="age"/&gt;&lt;/p&gt;
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20">&lt;!-- 4. 自动匹配表单参数 --&gt;
</span><span class="code-line line-number" line="21">&lt;form action="" method="post"&gt;
</span><span class="code-line line-number" line="22">    用户名：&lt;input type="text" name="username"&gt;&lt;br&gt;
</span><span class="code-line line-number" line="23">    年龄：&lt;input type="number" name="age"&gt;&lt;br&gt;
</span><span class="code-line line-number" line="24">    &lt;input type="submit" value="更新"&gt;
</span><span class="code-line line-number" line="25">&lt;/form&gt;
</span><span class="code-line line-number" line="26">
</span><span class="code-line line-number" line="27">&lt;jsp:setProperty name="user" property="*"/&gt;
</span><span class="code-line line-number" line="28">
</span><span class="code-line line-number" line="29">&lt;/body&gt;
</span><span class="code-line line-number" line="30">&lt;/html&gt;
</span></code></pre>
<ul>
<li>
<h4>作用域管理</h4>
</li>
</ul>
<p>JavaBean可以在不同作用域中共享：</p>






























<table><thead><tr><th align="left">作用域</th><th align="left">描述</th><th align="left">访问方式</th></tr></thead><tbody><tr><td align="left">page</td><td align="left">当前页面有效（默认）</td><td align="left">pageContext.getAttribute()</td></tr><tr><td align="left">request</td><td align="left">同一次请求有效（含转发）</td><td align="left">request.getAttribute()</td></tr><tr><td align="left">session</td><td align="left">同一用户会话有效</td><td align="left">request.getSession().getAttribute()</td></tr><tr><td align="left">application</td><td align="left">整个应用有效</td><td align="left">application.getAttribute()</td></tr></tbody></table>
<ul>
<li>
<h4>实际应用场景</h4>
</li>
</ul>
<blockquote>
<h5><strong>用户登录信息存储</strong></h5>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;jsp:useBean id="loginUser" class="com.model.User" scope="session"/&gt;
</span><span class="code-line line-number" line="2">&lt;jsp:setProperty name="loginUser" property="*"/&gt;
</span></code></pre>
<h5><strong>表单数据自动封装</strong></h5>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;!-- 表单字段名与Bean属性名匹配 --&gt;
</span><span class="code-line line-number" line="2">&lt;jsp:useBean id="formData" class="com.model.FormBean"/&gt;
</span><span class="code-line line-number" line="3">&lt;jsp:setProperty name="formData" property="*"/&gt;
</span></code></pre>
<h5><strong>配置信息共享</strong></h5>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;jsp:useBean id="config" class="com.util.AppConfig" scope="application"/&gt;
</span></code></pre>
</blockquote>
<h3>4、jsp 获取客户端请求参数的内置对象</h3>
<ul>
<li>
<h4>request 对象简介</h4>
</li>
</ul>
<blockquote>
<ul>
<li>类型：<code>javax.servlet.http.HttpServletRequest</code></li>
<li>作用：封装了客户端的所有请求信息</li>
<li>生命周期：一次请求期间有效（包括forward转发）</li>
</ul>
</blockquote>
<ul>
<li>
<h4>主要方法</h4>
</li>
</ul>
<blockquote>
<h5>(1) 获取单个参数值</h5>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">String value = request.getParameter("参数名");
</span></code></pre>
<p>示例：</p>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%
</span><span class="code-line line-number" line="2">String username = request.getParameter("username");
</span><span class="code-line line-number" line="3">String password = request.getParameter("password");
</span><span class="code-line line-number" line="4">%&gt;
</span></code></pre>
<h5>(2) 获取多个同名参数值（如复选框）</h5>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">String[] values = request.getParameterValues("参数名");
</span></code></pre>
<p>示例：</p>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%
</span><span class="code-line line-number" line="2">String[] hobbies = request.getParameterValues("hobby");
</span><span class="code-line line-number" line="3">if(hobbies != null) {
</span><span class="code-line line-number" line="4">  for(String hobby : hobbies) {
</span><span class="code-line line-number" line="5">      out.print(hobby + "&lt;br&gt;");
</span><span class="code-line line-number" line="6">  }
</span><span class="code-line line-number" line="7">}
</span><span class="code-line line-number" line="8">%&gt;
</span></code></pre>
<h5>(3) 获取所有参数名</h5>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">Enumeration&lt;String&gt; paramNames = request.getParameterNames();
</span></code></pre>
<p>示例：</p>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%
</span><span class="code-line line-number" line="2">Enumeration&lt;String&gt; names = request.getParameterNames();
</span><span class="code-line line-number" line="3">while(names.hasMoreElements()) {
</span><span class="code-line line-number" line="4">  String name = names.nextElement();
</span><span class="code-line line-number" line="5">  out.print(name + "=" + request.getParameter(name) + "&lt;br&gt;");
</span><span class="code-line line-number" line="6">}
</span><span class="code-line line-number" line="7">%&gt;
</span></code></pre>
<h5>(4) 获取参数Map</h5>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">Map&lt;String, String[]&gt; paramMap = request.getParameterMap();
</span></code></pre>
</blockquote>
<h3>5、jdbc里边用来执行简单不带参的SQL语句的接口</h3>
<ul>
<li>
<h4>Statement(不带参数)</h4>
</li>
</ul>
<blockquote>
<h5>Statement 接口特点</h5>
<ul>
<li>用于执行<strong>静态 SQL 语句</strong>（不包含参数）</li>
<li>直接拼接 SQL 字符串，<strong>有 SQL 注入风险</strong></li>
<li>适合执行 DDL 语句或简单的查询</li>
</ul>
<h5>主要方法</h5>





















<table><thead><tr><th align="left">方法</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>ResultSet executeQuery(String sql)</code></td><td align="left">执行查询语句，返回结果集</td></tr><tr><td align="left"><code>int executeUpdate(String sql)</code></td><td align="left">执行增删改语句，返回受影响行数</td></tr><tr><td align="left"><code>boolean execute(String sql)</code></td><td align="left">执行任意SQL，返回是否有结果集</td></tr></tbody></table>
<h5>使用示例</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 1. 创建Statement对象</span>
</span><span class="code-line line-number" line="2"><span class="token class-name">Statement</span> stmt <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token comment">// 2. 执行查询</span>
</span><span class="code-line line-number" line="5"><span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM products"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token comment">// 3. 执行更新</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">int</span> rows <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="9">  <span class="token string">"UPDATE users SET status=1 WHERE id=1001"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token comment">// 4. 执行DDL</span>
</span><span class="code-line line-number" line="12">stmt<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">"CREATE TABLE temp(id INT)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token comment">// 5. 关闭资源</span>
</span><span class="code-line line-number" line="15">rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">stmt<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h5>优缺点</h5>
<blockquote>
<h3>1. Statement 接口特点</h3>
</blockquote>
<blockquote>
<ul>
<li>用于执行<strong>静态 SQL 语句</strong>（不包含参数）</li>
<li>直接拼接 SQL 字符串，<strong>有 SQL 注入风险</strong></li>
<li>适合执行 DDL 语句或简单的查询</li>
</ul>
</blockquote>
<blockquote>
<h3>2. 主要方法</h3>
</blockquote>
<blockquote>





















<table><thead><tr><th align="left">方法</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>ResultSet executeQuery(String sql)</code></td><td align="left">执行查询语句，返回结果集</td></tr><tr><td align="left"><code>int executeUpdate(String sql)</code></td><td align="left">执行增删改语句，返回受影响行数</td></tr><tr><td align="left"><code>boolean execute(String sql)</code></td><td align="left">执行任意SQL，返回是否有结果集</td></tr></tbody></table>
</blockquote>
<blockquote>
<h3>3. 使用示例</h3>
</blockquote>
<blockquote>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 1. 创建Statement对象</span>
</span><span class="code-line line-number" line="2"><span class="token class-name">Statement</span> stmt <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</blockquote>
<blockquote>
<p>// 2. 执行查询
ResultSet rs = stmt.executeQuery("SELECT * FROM products");</p>
</blockquote>
<blockquote>
<p>// 3. 执行更新
int rows = stmt.executeUpdate(
"UPDATE users SET status=1 WHERE id=1001");</p>
</blockquote>
<blockquote>
<p>// 4. 执行DDL
stmt.execute("CREATE TABLE temp(id INT)");</p>
</blockquote>
<blockquote>
<p>// 5. 关闭资源
rs.close();
stmt.close();</p>
<pre><code class="code-highlight"></code></pre>
</blockquote>
<blockquote>
<h3>4. 优缺点</h3>
</blockquote>
<blockquote>
<p><strong>优点</strong>：</p>
</blockquote>
<blockquote>
<ul>
<li>使用简单</li>
<li>适合执行一次性SQL</li>
</ul>
</blockquote>
<blockquote>
<p><strong>缺点</strong>：</p>
</blockquote>
<blockquote>
<ul>
<li>SQL注入风险高</li>
<li>性能较低（每次执行都需编译）</li>
</ul>
</blockquote>
</blockquote>
<ul>
<li>
<h4>带参数（PreparedStatement）</h4>
</li>
</ul>
<blockquote>
<h5>PreparedStatement 特点</h5>
<ul>
<li>继承自 Statement 接口</li>
<li>使用<strong>预编译</strong>机制，<strong>防止 SQL 注入</strong></li>
<li>支持参数化查询（使用 <code>?</code> 占位符）</li>
<li>性能更高（SQL预编译一次，多次执行）</li>
</ul>
<h5>主要方法</h5>





























<table><thead><tr><th align="left">方法</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>void setXxx(int parameterIndex, Xxx value)</code></td><td align="left">设置参数值（Xxx为各种数据类型）</td></tr><tr><td align="left"><code>ResultSet executeQuery()</code></td><td align="left">执行查询（无需SQL参数）</td></tr><tr><td align="left"><code>int executeUpdate()</code></td><td align="left">执行更新（无需SQL参数）</td></tr><tr><td align="left"><code>void addBatch()</code></td><td align="left">添加到批处理</td></tr><tr><td align="left"><code>int[] executeBatch()</code></td><td align="left">执行批处理</td></tr></tbody></table>
<h5>使用示例</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 1. 创建PreparedStatement（带?占位符）</span>
</span><span class="code-line line-number" line="2"><span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="3">  <span class="token string">"SELECT * FROM users WHERE username=? AND password=?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token comment">// 2. 设置参数（索引从1开始）</span>
</span><span class="code-line line-number" line="6">pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9"><span class="token comment">// 3. 执行查询</span>
</span><span class="code-line line-number" line="10"><span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pstmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">
</span><span class="code-line line-number" line="12"><span class="token comment">// 4. 批处理示例</span>
</span><span class="code-line line-number" line="13">pstmt <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">"INSERT INTO logs(message) VALUES(?)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Log entry 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15">pstmt<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Log entry 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">pstmt<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> counts <span class="token operator">=</span> pstmt<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22"><span class="token comment">// 5. 关闭资源</span>
</span><span class="code-line line-number" line="23">rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="24">pstmt<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h5>参数类型设置方法</h5>





































<table><thead><tr><th align="left">方法</th><th align="left">对应SQL类型</th></tr></thead><tbody><tr><td align="left"><code>setString(int, String)</code></td><td align="left">VARCHAR, CHAR</td></tr><tr><td align="left"><code>setInt(int, int)</code></td><td align="left">INTEGER</td></tr><tr><td align="left"><code>setDouble(int, double)</code></td><td align="left">DOUBLE</td></tr><tr><td align="left"><code>setDate(int, Date)</code></td><td align="left">DATE</td></tr><tr><td align="left"><code>setTimestamp(int, Timestamp)</code></td><td align="left">TIMESTAMP</td></tr><tr><td align="left"><code>setBoolean(int, boolean)</code></td><td align="left">BOOLEAN</td></tr><tr><td align="left"><code>setNull(int, int)</code></td><td align="left">设置NULL</td></tr></tbody></table>
<h5>优缺点</h5>
<blockquote>
<h6><strong>优点</strong>：</h6>
</blockquote>
<blockquote>
<ul>
<li>防止SQL注入</li>
<li>性能更高</li>
<li>代码可读性好</li>
<li>支持批处理</li>
</ul>
</blockquote>
<blockquote>
<h6><strong>缺点</strong>：</h6>
</blockquote>
<blockquote>
<ul>
<li>编写稍复杂</li>
<li>不适合动态表名/列名的情况</li>
</ul>
</blockquote>
</blockquote>
<ul>
<li>
<h4><strong>Statement vs PreparedStatement 对比</strong></h4>
</li>
</ul>








































<table><thead><tr><th align="left">特性</th><th align="left">Statement</th><th align="left">PreparedStatement</th></tr></thead><tbody><tr><td align="left"><strong>参数支持</strong></td><td align="left">不支持</td><td align="left">支持(?占位符)</td></tr><tr><td align="left"><strong>SQL注入</strong></td><td align="left">易受攻击</td><td align="left">防止注入</td></tr><tr><td align="left"><strong>性能</strong></td><td align="left">每次执行都编译</td><td align="left">预编译，高效</td></tr><tr><td align="left"><strong>适用场景</strong></td><td align="left">简单查询、DDL</td><td align="left">参数化查询、用户输入</td></tr><tr><td align="left"><strong>批处理</strong></td><td align="left">支持但效率低</td><td align="left">高效批处理</td></tr><tr><td align="left"><strong>代码示例</strong></td><td align="left"><code>stmt.executeQuery("SELECT...")</code></td><td align="left"><code>pstmt.setString(1,value); pstmt.executeQuery()</code></td></tr></tbody></table>
<h3>6、Servlet生命周期</h3>
<ul>
<li>
<h4>初始化阶段 - init() 方法</h4>
</li>
</ul>
<blockquote>
<h5><strong>执行时机</strong>：</h5>
<ul>
<li>Servlet 容器（如 Tomcat）第一次加载 Servlet 时调用</li>
<li>只执行一次</li>
</ul>
<h5><strong>主要用途</strong>：</h5>
<ul>
<li>加载资源（数据库连接、配置文件等）</li>
<li>初始化参数</li>
</ul>
<h6><strong>示例</strong>：</h6>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token keyword">private</span> <span class="token class-name">DatabaseConnection</span> dbConnection<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">  <span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="5">  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">      <span class="token comment">// 初始化数据库连接</span>
</span><span class="code-line line-number" line="7">      dbConnection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatabaseConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">      dbConnection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">      <span class="token comment">// 获取初始化参数（web.xml中配置的）</span>
</span><span class="code-line line-number" line="11">      <span class="token class-name">String</span> config <span class="token operator">=</span> <span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"configFile"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Servlet初始化完成，配置文件："</span> <span class="token operator">+</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14"><span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
<ul>
<li>
<h4>处理请求阶段 - service() 方法</h4>
<blockquote>
<h5><strong>执行时机</strong>：</h5>
<ul>
<li>每次客户端请求时调用（执行多次）</li>
<li>根据请求类型调用 doGet() 或 doPost()</li>
</ul>
<h6><strong>主要用途</strong>：</h6>
<ul>
<li>处理客户端请求</li>
<li>生成响应</li>
</ul>
<h5><strong>示例</strong>：</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> 
</span><span class="code-line line-number" line="3">          <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">      response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">      <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">      out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"&lt;h1&gt;处理GET请求&lt;/h1&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9">      <span class="token comment">// 使用初始化阶段创建的数据库连接</span>
</span><span class="code-line line-number" line="10">      <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> dbConnection<span class="token punctuation">.</span><span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">      <span class="token comment">// ...处理数据</span>
</span><span class="code-line line-number" line="12">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14">  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> 
</span><span class="code-line line-number" line="15">          <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">      <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">      <span class="token comment">// 处理表单提交...</span>
</span><span class="code-line line-number" line="19">      response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="20">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>销毁阶段 - destroy() 方法</h4>
<blockquote>
<h5><strong>执行时机</strong>：</h5>
<ul>
<li>Servlet 容器关闭或 Servlet 被移除时调用</li>
<li>只执行一次</li>
</ul>
<h5><strong>主要用途</strong>：</h5>
<ul>
<li>释放资源（关闭数据库连接等）</li>
<li>保存状态信息</li>
</ul>
<h5><strong>示例</strong>：</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">      <span class="token comment">// 关闭数据库连接</span>
</span><span class="code-line line-number" line="5">      <span class="token keyword">if</span><span class="token punctuation">(</span>dbConnection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">          dbConnection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">          <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"释放数据库连接"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">      <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">      <span class="token comment">// 保存日志信息等</span>
</span><span class="code-line line-number" line="11">      <span class="token function">saveAccessLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13"><span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>计数器 Servlet(完整例子)</h4>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/counter"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CounterServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">private</span> <span class="token keyword">int</span> visitCount<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">    
</span><span class="code-line line-number" line="5">    <span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        visitCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"计数器Servlet初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">    
</span><span class="code-line line-number" line="11">    <span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="12">    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> 
</span><span class="code-line line-number" line="13">            <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">        
</span><span class="code-line line-number" line="15">        visitCount<span class="token operator">++</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17">        <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"&lt;h2&gt;访问次数: "</span> <span class="token operator">+</span> visitCount <span class="token operator">+</span> <span class="token string">"&lt;/h2&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="20">    
</span><span class="code-line line-number" line="21">    <span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="22">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="23">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"最终访问次数: "</span> <span class="token operator">+</span> visitCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="24">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Servlet销毁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="25">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="26"><span class="token punctuation">}</span>
</span></code></pre>
</li>
</ul>
<h3>7、作用域问题</h3>
<ul>
<li>
<p>page、request、session、application</p>
</li>
<li>
<p>page、request、session、application各自用于共享数据的情况(哪个用于在多个用户之间共享数据)</p>
</li>
<li>
<p>page是给当前页面有效，request和session是一个用户一个，application是所有用户共用一个。</p>
</li>
<li>
<h4>四大作用域对比</h4>








































<table><thead><tr><th align="left">作用域</th><th align="left">对应的JSP对象</th><th align="left">实现类</th><th align="left">生命周期</th><th align="left">典型应用场景</th></tr></thead><tbody><tr><td align="left"><strong>page</strong></td><td align="left"><code>pageContext</code></td><td align="left"><code>javax.servlet.jsp.PageContext</code></td><td align="left">当前页面执行期间</td><td align="left">页面临时变量</td></tr><tr><td align="left"><strong>request</strong></td><td align="left"><code>request</code></td><td align="left"><code>javax.servlet.http.HttpServletRequest</code></td><td align="left">同一次请求期间（包括forward）</td><td align="left">请求参数传递</td></tr><tr><td align="left"><strong>session</strong></td><td align="left"><code>session</code></td><td align="left"><code>javax.servlet.http.HttpSession</code></td><td align="left">用户会话期间（默认30分钟不活动失效）</td><td align="left">用户登录状态</td></tr><tr><td align="left"><strong>application</strong></td><td align="left"><code>application</code></td><td align="left"><code>javax.servlet.ServletContext</code></td><td align="left">整个Web应用运行期间</td><td align="left">全局配置信息</td></tr></tbody></table>
</li>
<li>
<h4>各作用域详细说明</h4>
</li>
</ul>
<blockquote>
<h5>page 作用域</h5>
<blockquote>
<h6><strong>特点</strong>：</h6>
</blockquote>
<blockquote>
<ul>
<li>仅在当前 JSP 页面内有效</li>
<li>页面刷新或跳转后数据丢失</li>
<li>通过 <code>pageContext</code> 对象存取</li>
</ul>
</blockquote>
<blockquote>
<h6><strong>示例代码</strong>：</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%-- 设置page范围属性 --%&gt;
</span><span class="code-line line-number" line="2">&lt;%
</span><span class="code-line line-number" line="3">pageContext.setAttribute("pageVar", "临时数据", PageContext.PAGE_SCOPE);
</span><span class="code-line line-number" line="4">// 等效简写
</span><span class="code-line line-number" line="5">pageContext.setAttribute("pageVar", "临时数据");
</span><span class="code-line line-number" line="6">%&gt;
</span></code></pre>
</blockquote>
<blockquote>
<p>&lt;%-- 获取page范围属性 --%&gt;</p>
<p>Page变量值：&lt;%= pageContext.getAttribute("pageVar") %&gt;</p>
<pre><code class="code-highlight"></code></pre>
</blockquote>
<h5>request 作用域</h5>
<blockquote>
<h6><strong>特点</strong>：</h6>
</blockquote>
<blockquote>
<ul>
<li>在同一次请求周期内有效</li>
<li>包括通过 <code>forward</code> 跳转的页面</li>
<li>通过 <code>request</code> 对象存取</li>
</ul>
</blockquote>
<blockquote>
<h6><strong>示例代码</strong>：</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%-- 设置request属性 --%&gt;
</span><span class="code-line line-number" line="2">&lt;%
</span><span class="code-line line-number" line="3">request.setAttribute("reqVar", "请求数据");
</span><span class="code-line line-number" line="4">%&gt;
</span></code></pre>
</blockquote>
<blockquote>
<p>&lt;%-- 转发到另一个JSP --%&gt;
&lt;jsp:forward page="receiveRequest.jsp"/&gt;</p>
<pre><code class="code-highlight"></code></pre>
</blockquote>
<blockquote>
<p>在 <code>receiveRequest.jsp</code> 中：</p>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;p&gt;Request变量值：&lt;%= request.getAttribute("reqVar") %&gt;&lt;/p&gt;
</span></code></pre>
</blockquote>
<h5>session 作用域</h5>
<blockquote>
<h6><strong>特点</strong>：</h6>
</blockquote>
<blockquote>
<ul>
<li>在同一用户会话期间有效</li>
<li>默认30分钟不活动后失效</li>
<li>可跨多个请求</li>
<li>通过 <code>session</code> 对象存取</li>
</ul>
</blockquote>
<blockquote>
<h6><strong>示例代码</strong>：</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%-- 设置session属性 --%&gt;
</span><span class="code-line line-number" line="2">&lt;%
</span><span class="code-line line-number" line="3">session.setAttribute("user", "张三");
</span><span class="code-line line-number" line="4">%&gt;
</span></code></pre>
</blockquote>
<blockquote>
<p>&lt;%-- 在其他页面获取 --%&gt;</p>
<p>当前用户：&lt;%= session.getAttribute("user") %&gt;</p>
</blockquote>
<blockquote>
<p>&lt;%-- 手动销毁session --%&gt;
&lt;%
session.invalidate();
%&gt;</p>
<pre><code class="code-highlight"></code></pre>
</blockquote>
<h5>application 作用域</h5>
<blockquote>
<h6><strong>特点</strong>：</h6>
</blockquote>
<blockquote>
<ul>
<li>整个Web应用范围内有效</li>
<li>所有用户共享同一份数据</li>
<li>服务器关闭或应用卸载时销毁</li>
<li>通过 <code>application</code> 对象存取</li>
</ul>
</blockquote>
<blockquote>
<h6><strong>示例代码</strong>：</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%-- 设置application属性 --%&gt;
</span><span class="code-line line-number" line="2">&lt;%
</span><span class="code-line line-number" line="3">application.setAttribute("visitCount", 0);
</span><span class="code-line line-number" line="4">%&gt;
</span></code></pre>
</blockquote>
<blockquote>
<p>&lt;%-- 访问计数器示例 --%&gt;
&lt;%
Integer count = (Integer) application.getAttribute("visitCount");
application.setAttribute("visitCount", count + 1);
%&gt;</p>
<p>网站总访问量：&lt;%= application.getAttribute("visitCount") %&gt;</p>
<pre><code class="code-highlight"></code></pre>
</blockquote>
</blockquote>
<h3>8、web.xml配置（Web配置错误页面（使用范围）用什么标签）</h3>
<ul>
<li>
<p>在这里面我们通常配置一些初始化参数，servlet过滤器、监听器，还有错误页面，那么我们如何在web.xml里面配置错误页面，使用哪个标签，就是说在web.xml里面用哪个标签来配置错误页面，比如说我们客户，我们用户从服务器的访问一个资源存在，那一般可以报错吧，然后我想把某一个页面，就把这一面更改成其他一面，那么这时候用哪个标签啊，这个大家要知道。</p>
</li>
<li>
<p>错误页面：<error-page></error-page></p>
</li>
<li>
<p>初始化参数：<context-param></context-param></p>
<p>在 web.xml 文件中，使用 <code>&lt;error-page&gt;</code> 标签来配置错误页面，它允许开发者自定义当特定错误发生时显示给用户的页面。</p>
</li>
<li>
<h5>基本配置语法</h5>
<pre class="language-xml"><code class="language-xml code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">&gt;</span></span>错误代码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exception-type</span><span class="token punctuation">&gt;</span></span>异常类型<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exception-type</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="4">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>错误处理页面路径<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="5"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
</li>
<li>
<h5>三种配置方式</h5>
<blockquote>
<h5>1. 按 HTTP 错误代码配置</h5>
<pre class="language-xml"><code class="language-xml code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">&gt;</span></span>404<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error/404.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="4"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="7"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">&gt;</span></span>500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="8"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error/500.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="9"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<h5>2. 按 Java 异常类型配置</h5>
<pre class="language-xml"><code class="language-xml code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exception-type</span><span class="token punctuation">&gt;</span></span>java.lang.NullPointerException<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exception-type</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error/null.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="4"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="7"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exception-type</span><span class="token punctuation">&gt;</span></span>java.lang.Exception<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exception-type</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="8"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error/general.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="9"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<h5>3. 默认错误页面配置</h5>
<pre class="language-xml"><code class="language-xml code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error/default.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>完整配置示例</h4>
<pre class="language-xml"><code class="language-xml code-highlight"><span class="code-line line-number" line="1"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">"</span></span>
</span></span><span class="code-line line-number" line="3"><span class="token tag">         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
</span></span><span class="code-line line-number" line="4"><span class="token tag">         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee 
</span></span></span><span class="code-line line-number" line="5"><span class="token tag"><span class="token attr-value">                             http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd<span class="token punctuation">"</span></span>
</span></span><span class="code-line line-number" line="6"><span class="token tag">         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="7">    
</span><span class="code-line line-number" line="8">    <span class="token comment">&lt;!-- 配置404错误页面 --&gt;</span>
</span><span class="code-line line-number" line="9">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="10">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">&gt;</span></span>404<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="11">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error/notFound.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="12">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="13">    
</span><span class="code-line line-number" line="14">    <span class="token comment">&lt;!-- 配置500错误页面 --&gt;</span>
</span><span class="code-line line-number" line="15">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="16">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">&gt;</span></span>500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="17">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error/serverError.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="18">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="19">    
</span><span class="code-line line-number" line="20">    <span class="token comment">&lt;!-- 配置特定异常的处理页面 --&gt;</span>
</span><span class="code-line line-number" line="21">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="22">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exception-type</span><span class="token punctuation">&gt;</span></span>java.sql.SQLException<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exception-type</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="23">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error/databaseError.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="24">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="25">    
</span><span class="code-line line-number" line="26">    <span class="token comment">&lt;!-- 默认错误页面 --&gt;</span>
</span><span class="code-line line-number" line="27">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="28">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error/defaultError.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="29">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="30">    
</span><span class="code-line line-number" line="31"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
</li>
<li>
<h4>错误页面中的可用对象</h4>
<p>在错误处理JSP页面中，可以通过以下对象获取错误信息：</p>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%@ page isErrorPage="true" %&gt;
</span><span class="code-line line-number" line="2">&lt;html&gt;
</span><span class="code-line line-number" line="3">&lt;head&gt;
</span><span class="code-line line-number" line="4">    &lt;title&gt;错误页面&lt;/title&gt;
</span><span class="code-line line-number" line="5">&lt;/head&gt;
</span><span class="code-line line-number" line="6">&lt;body&gt;
</span><span class="code-line line-number" line="7">    &lt;h2&gt;错误信息&lt;/h2&gt;
</span><span class="code-line line-number" line="8">    &lt;p&gt;状态码：${pageContext.errorData.statusCode}&lt;/p&gt;
</span><span class="code-line line-number" line="9">    &lt;p&gt;请求URI：${pageContext.errorData.requestURI}&lt;/p&gt;
</span><span class="code-line line-number" line="10">    &lt;p&gt;异常：${pageContext.exception.message}&lt;/p&gt;
</span><span class="code-line line-number" line="11">    
</span><span class="code-line line-number" line="12">    &lt;%-- 如果是JSP页面，需要设置isErrorPage="true"才能访问exception对象 --%&gt;
</span><span class="code-line line-number" line="13">    &lt;% if(exception != null) { %&gt;
</span><span class="code-line line-number" line="14">        &lt;p&gt;堆栈跟踪：&lt;% exception.printStackTrace(new java.io.PrintWriter(out)); %&gt;&lt;/p&gt;
</span><span class="code-line line-number" line="15">    &lt;% } %&gt;
</span><span class="code-line line-number" line="16">&lt;/body&gt;
</span><span class="code-line line-number" line="17">&lt;/html&gt;
</span></code></pre>
</li>
</ul>
<h3>9、Servlet生命周期</h3>
<ul>
<li>Init、destroy方法执行一次</li>
<li>service方法执行多次</li>
</ul>
<h3>10、JBDC常用的接口及其用途</h3>
<ul>
<li>
<h4>Connection 接口</h4>
<blockquote>
<h5>作用</h5>
<p><code>Connection</code> 接口代表与数据库的连接会话，是JDBC所有操作的起点，负责：</p>
<ul>
<li>创建执行SQL的Statement对象</li>
<li>管理事务（提交/回滚）</li>
<li>获取数据库元数据</li>
<li>设置连接属性（如自动提交模式）</li>
</ul>
<h5>使用方法</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1">   <span class="token comment">// 1. 获取数据库连接</span>
</span><span class="code-line line-number" line="2">   <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/mydb"</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">   <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">   <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"password"</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6">   <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">   <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">       <span class="token comment">// 加载驱动（JDBC 4.0+可省略）</span>
</span><span class="code-line line-number" line="9">       <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">       <span class="token comment">// 建立连接</span>
</span><span class="code-line line-number" line="12">       conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14">       <span class="token comment">// 2. 设置连接属性</span>
</span><span class="code-line line-number" line="15">       conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 关闭自动提交，开启事务</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">       <span class="token comment">// 3. 使用连接创建Statement</span>
</span><span class="code-line line-number" line="18">       <span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20">       <span class="token comment">// 执行SQL操作...</span>
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22">       <span class="token comment">// 提交事务</span>
</span><span class="code-line line-number" line="23">       conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="24">
</span><span class="code-line line-number" line="25">   <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="26">       <span class="token comment">// 发生异常时回滚</span>
</span><span class="code-line line-number" line="27">       <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="28">           <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">               conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="30">           <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="31">               ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="32">           <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="33">       <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="34">       e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="35">   <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="36">       <span class="token comment">// 4. 关闭连接</span>
</span><span class="code-line line-number" line="37">       <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="38">           <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="39">               conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="40">           <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="41">               e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="42">           <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="43">       <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="44">   <span class="token punctuation">}</span>
</span></code></pre>
<h2></h2>
</blockquote>
</li>
<li>
<h4>Statement 接口</h4>
<blockquote>
<h5>作用</h5>
<p>用于执行<strong>静态SQL语句</strong>（不带参数），主要用于：</p>
<ul>
<li>执行DDL语句（CREATE, ALTER, DROP）</li>
<li>执行简单查询或更新</li>
<li>批处理操作</li>
</ul>
<h5>使用方法</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"> <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">      <span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">     <span class="token comment">// 1. 执行查询</span>
</span><span class="code-line line-number" line="5">     <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM employees"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">     <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">     <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">     <span class="token comment">// 2. 执行更新</span>
</span><span class="code-line line-number" line="11">     <span class="token keyword">int</span> rows <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="12">         <span class="token string">"UPDATE employees SET salary = salary * 1.1 WHERE dept = 'IT'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"更新了"</span> <span class="token operator">+</span> rows <span class="token operator">+</span> <span class="token string">"行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">     <span class="token comment">// 3. 批处理</span>
</span><span class="code-line line-number" line="16">     stmt<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token string">"INSERT INTO departments VALUES(10, 'IT')"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17">     stmt<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token string">"INSERT INTO departments VALUES(20, 'HR')"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">     <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> counts <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20"> <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="21">     e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22"> <span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>PreparedStatement 接口</h4>
<blockquote>
<h5>作用</h5>
<p>继承自<code>Statement</code>，用于执行<strong>预编译SQL语句</strong>（带参数），优势：</p>
<ul>
<li>防止SQL注入攻击</li>
<li>提高性能（SQL预编译一次，多次执行）</li>
<li>更好的代码可读性</li>
<li>支持自动类型转换</li>
</ul>
<h5>使用方法</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1">   <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"INSERT INTO employees (id, name, salary, hire_date) VALUES (?, ?, ?, ?)"</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">   <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">        <span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6">       <span class="token comment">// 1. 设置参数（索引从1开始）</span>
</span><span class="code-line line-number" line="7">       pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">       pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">       pstmt<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8500.50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">       pstmt<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span>Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">
</span><span class="code-line line-number" line="12">       <span class="token comment">// 2. 执行更新</span>
</span><span class="code-line line-number" line="13">       <span class="token keyword">int</span> rows <span class="token operator">=</span> pstmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">       <span class="token comment">// 3. 重用PreparedStatement</span>
</span><span class="code-line line-number" line="16">       pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1002</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17">       pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">       pstmt<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9200.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">       pstmt<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span>Date</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="20">                           <span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-15"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22">       rows <span class="token operator">+=</span> pstmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="23">       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"插入了"</span> <span class="token operator">+</span> rows <span class="token operator">+</span> <span class="token string">"条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="24">
</span><span class="code-line line-number" line="25">   <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="26">       e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="27">   <span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>CallableStatement 接口</h4>
<blockquote>
<h5>作用</h5>
<p>继承自<code>PreparedStatement</code>，用于调用数据库<strong>存储过程</strong>，支持：</p>
<ul>
<li>IN参数（输入参数）</li>
<li>OUT参数（输出参数）</li>
<li>INOUT参数（输入输出参数）</li>
</ul>
<h5>使用方法</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"> <span class="token comment">// 假设有存储过程：CREATE PROCEDURE raise_salary(IN emp_id INT, IN percent DOUBLE, OUT new_salary DOUBLE)</span>
</span><span class="code-line line-number" line="2"> <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">      <span class="token class-name">CallableStatement</span> cstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareCall</span><span class="token punctuation">(</span><span class="token string">"{call raise_salary(?, ?, ?)}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">     <span class="token comment">// 1. 设置输入参数</span>
</span><span class="code-line line-number" line="6">     cstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// emp_id</span>
</span><span class="code-line line-number" line="7">     cstmt<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 10%涨薪</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9">     <span class="token comment">// 2. 注册输出参数</span>
</span><span class="code-line line-number" line="10">     cstmt<span class="token punctuation">.</span><span class="token function">registerOutParameter</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span><span class="token constant">DOUBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// new_salary</span>
</span><span class="code-line line-number" line="11">
</span><span class="code-line line-number" line="12">     <span class="token comment">// 3. 执行存储过程</span>
</span><span class="code-line line-number" line="13">     cstmt<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">     <span class="token comment">// 4. 获取输出参数</span>
</span><span class="code-line line-number" line="16">     <span class="token keyword">double</span> newSalary <span class="token operator">=</span> cstmt<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17">     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"调整后薪资："</span> <span class="token operator">+</span> newSalary<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">
</span><span class="code-line line-number" line="19"> <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="20">     e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="21"> <span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>ResultSet 接口</h4>
<blockquote>
<h5>作用</h5>
<p>表示数据库查询的结果集，提供：</p>
<ul>
<li>遍历结果的方法</li>
<li>获取各种数据类型的方法</li>
<li>更新结果集的方法（可滚动、可更新结果集）</li>
</ul>
<h5>使用方法</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1">   <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT id, name, salary, hire_date FROM employees WHERE dept = ?"</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">   <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">        <span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> 
</span><span class="code-line line-number" line="5">                                   <span class="token class-name">ResultSet</span><span class="token punctuation">.</span><span class="token constant">TYPE_SCROLL_INSENSITIVE</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="6">                                   <span class="token class-name">ResultSet</span><span class="token punctuation">.</span><span class="token constant">CONCUR_UPDATABLE</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">       pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"IT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">       <span class="token comment">// 1. 执行查询并获取ResultSet</span>
</span><span class="code-line line-number" line="11">       <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pstmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13">           <span class="token comment">// 2. 遍历结果集</span>
</span><span class="code-line line-number" line="14">           <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">               <span class="token keyword">int</span> id <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 通过列名获取</span>
</span><span class="code-line line-number" line="16">               <span class="token class-name">String</span> name <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过列索引获取（从1开始）</span>
</span><span class="code-line line-number" line="17">               <span class="token keyword">double</span> salary <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">               <span class="token class-name">Date</span> hireDate <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">"hire_date"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20">               <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\t%s\t%.2f\t%s%n"</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> hireDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="21">           <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23">           <span class="token comment">// 3. 可滚动结果集操作</span>
</span><span class="code-line line-number" line="24">           rs<span class="token punctuation">.</span><span class="token function">absolute</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移动到第3行</span>
</span><span class="code-line line-number" line="25">           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"第3行员工："</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="26">
</span><span class="code-line line-number" line="27">           <span class="token comment">// 4. 可更新结果集操作</span>
</span><span class="code-line line-number" line="28">           rs<span class="token punctuation">.</span><span class="token function">updateDouble</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span> rs<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.05</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="29">           rs<span class="token punctuation">.</span><span class="token function">updateRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 必须调用以保存更改</span>
</span><span class="code-line line-number" line="30">       <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="31">
</span><span class="code-line line-number" line="32">   <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="33">       e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="34">   <span class="token punctuation">}</span>
</span></code></pre>
<h2></h2>
</blockquote>
</li>
</ul>
<h2>二、判断题（10×1）</h2>
<h3>1、for each语句</h3>
<p>for-each 循环（也称为增强型 for 循环）是 Java 5 引入的一种简化数组和集合遍历的语法结构。</p>
<ul>
<li>
<h4>基本语法</h4>
</li>
</ul>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">for</span> <span class="token punctuation">(</span>元素类型 元素变量 <span class="token operator">:</span> 数组或集合<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token comment">// 循环体</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span></code></pre>
<ul>
<li>
<h4>使用示例</h4>
</li>
</ul>
<blockquote>
<h5>1. 遍历数组</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 传统for循环</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> numbers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numbers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token comment">// 使用for-each</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10"><span class="token punctuation">}</span>
</span></code></pre>
<h5>2. 遍历集合</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> fruits <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token comment">// 传统迭代器方式</span>
</span><span class="code-line line-number" line="4"><span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6"><span class="token class-name">String</span> fruit <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fruit<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10"><span class="token comment">// 使用for-each</span>
</span><span class="code-line line-number" line="11"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> fruit <span class="token operator">:</span> fruits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fruit<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13"><span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
<p>不要混淆 for-each 循环和 Java 8 的 forEach() 方法：</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token comment">// 传统for-each循环</span>
</span><span class="code-line line-number" line="4"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token comment">// Java 8 forEach方法</span>
</span><span class="code-line line-number" line="9">list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h3>2、jsp标记</h3>
<p>JSP（JavaServer Pages）标记是JSP技术中用于在HTML页面中嵌入Java代码或执行特定功能的特殊标记。JSP标记简化了动态网页的开发，使开发者能够更便捷地将Java代码与HTML内容混合使用。</p>
<ul>
<li>
<h4>JSP标记分类</h4>
</li>
</ul>
<blockquote>
<h5>脚本标记（Scripting Elements）</h5>
<blockquote>
<h6>(1) <code>&lt;% ... %&gt;</code> - 脚本片段（Scriptlet）</h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：嵌入Java代码片段</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%
</span><span class="code-line line-number" line="2">// Java代码
</span><span class="code-line line-number" line="3">String name = "张三";
</span><span class="code-line line-number" line="4">out.println("你好，" + name);
</span><span class="code-line line-number" line="5">%&gt;
</span></code></pre>
</blockquote>
<blockquote>
<h6>(2) <code>&lt;%= ... %&gt;</code> - 表达式（Expression）</h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：输出表达式结果（自动调用toString()）</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;p&gt;当前时间: &lt;%= new java.util.Date() %&gt;&lt;/p&gt;
</span></code></pre>
</blockquote>
<blockquote>
<h6>(3) <code>&lt;%! ... %&gt;</code> - 声明（Declaration）</h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：声明成员变量或方法</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%!
</span><span class="code-line line-number" line="2">private int count = 0;
</span></code></pre>
</blockquote>
<blockquote>
<p>public String greet(String name) {
return "你好，" + name;
}
%&gt;</p>
<pre><code class="code-highlight"></code></pre>
</blockquote>
<h5>指令标记（Directives）</h5>
<blockquote>
<h6>(1) <code>&lt;%@ page ... %&gt;</code> - 页面指令</h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：定义页面属性</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" 
</span><span class="code-line line-number" line="2">import="java.util.*, com.example.*" session="true" errorPage="/error.jsp" %&gt;
</span></code></pre>
</blockquote>
<blockquote>
<h6>(2) <code>&lt;%@ include ... %&gt;</code> - 包含指令</h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：静态包含其他文件内容（编译时包含）</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%@ include file="/common/header.jsp" %&gt;
</span></code></pre>
</blockquote>
<blockquote>
<h6>(3) <code>&lt;%@ taglib ... %&gt;</code> - 标签库指令</h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：引入自定义标签库</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
</span></code></pre>
</blockquote>
<h5>动作标记（Action Tags）</h5>
<blockquote>
<h6>(1) <code>&lt;jsp:include&gt;</code></h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：动态包含其他页面（运行时包含）</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;jsp:include page="/common/navbar.jsp" /&gt;
</span></code></pre>
</blockquote>
<blockquote>
<h6>(2) <code>&lt;jsp:forward&gt;</code></h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：转发请求到另一个页面</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;jsp:forward page="/login.jsp" /&gt;
</span></code></pre>
</blockquote>
<blockquote>
<h6>(3) <code>&lt;jsp:useBean&gt;</code></h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：实例化或查找JavaBean</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;jsp:useBean id="user" class="com.example.User" scope="session" /&gt;
</span></code></pre>
</blockquote>
<blockquote>
<h6>(4) <code>&lt;jsp:setProperty&gt;</code></h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：设置JavaBean属性</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;jsp:setProperty name="user" property="name" value="张三" /&gt;
</span></code></pre>
</blockquote>
<blockquote>
<h6>(5) <code>&lt;jsp:getProperty&gt;</code></h6>
</blockquote>
<blockquote>
<h6><strong>作用</strong>：获取JavaBean属性</h6>
</blockquote>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;p&gt;用户名: &lt;jsp:getProperty name="user" property="name" /&gt;&lt;/p&gt;
</span></code></pre>
</blockquote>
</blockquote>
<ul>
<li>
<h4>JSTL（JSP标准标签库）标记</h4>
</li>
</ul>
<blockquote>
<p>JSTL提供了更强大的标签功能，需先引入标签库：</p>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
</span><span class="code-line line-number" line="2">&lt;%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %&gt;
</span></code></pre>
<h5>1. 核心标签</h5>
<h6><code>&lt;c:if&gt;</code></h6>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;c:if test="${user != null}"&gt;
</span><span class="code-line line-number" line="2">&lt;p&gt;欢迎回来，${user.name}&lt;/p&gt;
</span><span class="code-line line-number" line="3">&lt;/c:if&gt;
</span></code></pre>
<h6><code>&lt;c:forEach&gt;</code></h6>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;c:forEach items="${products}" var="product" varStatus="status"&gt;
</span><span class="code-line line-number" line="2">&lt;p&gt;${status.index + 1}. ${product.name} - ${product.price}&lt;/p&gt;
</span><span class="code-line line-number" line="3">&lt;/c:forEach&gt;
</span></code></pre>
<h5>2. 格式化标签</h5>
<h6><code>&lt;fmt:formatDate&gt;</code></h6>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;fmt:formatDate value="${now}" pattern="yyyy-MM-dd HH:mm:ss" /&gt;
</span></code></pre>
</blockquote>
<ul>
<li>
<h4>自定义标记</h4>
<blockquote>
<p>开发者可以创建自己的JSP标记：</p>
<ol>
<li>创建标签处理器类</li>
<li>编写TLD（标签库描述符）文件</li>
<li>在JSP中引入并使用</li>
</ol>
<h5>示例：自定义Hello标签</h5>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%@ taglib prefix="my" uri="/WEB-INF/mytags.tld" %&gt;
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">&lt;my:hello name="张三" /&gt;
</span></code></pre>
</blockquote>
</li>
<li>
<h4>标记对比：JSP标记 vs HTML标记</h4>
</li>
</ul>






























<table><thead><tr><th>特性</th><th>JSP标记</th><th>HTML标记</th></tr></thead><tbody><tr><td><strong>处理时机</strong></td><td>服务器端执行</td><td>浏览器端解析</td></tr><tr><td><strong>功能</strong></td><td>生成动态内容、业务逻辑处理</td><td>定义页面结构和静态内容</td></tr><tr><td><strong>语法</strong></td><td>以<code>&lt;%</code>或<code>&lt;jsp:</code>或自定义前缀开头</td><td>标准HTML标签</td></tr><tr><td><strong>可见性</strong></td><td>客户端不可见（只看到执行结果）</td><td>客户端可见</td></tr></tbody></table>
<ul>
<li>
<h4>最佳实践</h4>
<blockquote>
<ol>
<li>
<h5><strong>减少脚本标记</strong>：尽量使用JSTL和EL表达式替代Scriptlet</h5>
</li>
<li>
<h5><strong>合理使用包含</strong>：</h5>
</li>
</ol>
<ul>
<li>
<p>静态包含（<code>&lt;%@ include %&gt;</code>）用于不变化的公共部分</p>
</li>
<li>
<p>动态包含（<code>&lt;jsp:include&gt;</code>）用于可能变化的内容</p>
</li>
</ul>
<ol start="3">
<li>
<h5><strong>避免业务逻辑</strong>：JSP应专注于展示，业务逻辑应放在Servlet或JavaBean中</h5>
</li>
<li>
<h5><strong>注释方式</strong>：</h5>
</li>
</ol>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%-- JSP注释（不会发送到客户端） --%&gt;
</span><span class="code-line line-number" line="2">&lt;!-- HTML注释（会发送到客户端） --&gt;
</span></code></pre>
</blockquote>
</li>
</ul>
<h3>3、MVC架构对比</h3>
<ul>
<li>
<p><strong>Model1</strong>：JSP+JavaBean（高耦合）</p>
</li>
<li>
<p><strong>Model2</strong>：MVC分层（推荐）</p>
</li>
<li>
<p>model和model2各自优缺点</p>
</li>
<li>
<h4>MVC架构基础概念</h4>
</li>
</ul>
<p>MVC（Model-View-Controller）是一种将应用程序分为三个核心组件的软件设计模式：</p>





















<table><thead><tr><th>组件</th><th>职责</th></tr></thead><tbody><tr><td>Model</td><td>处理数据和业务逻辑，负责数据存取、验证和业务规则实现</td></tr><tr><td>View</td><td>负责数据展示和用户界面，不包含业务逻辑</td></tr><tr><td>Controller</td><td>接收用户输入，协调Model和View的交互，不直接处理数据或显示界面</td></tr></tbody></table>
<ul>
<li>
<h4>Model1架构</h4>
<blockquote>
<h5>1. 基本结构</h5>
<p>Model1是早期的JSP开发模式，主要特点：</p>
<ul>
<li>
<h6><strong>JSP为中心</strong>：JSP页面同时处理控制逻辑和显示逻辑</h6>
</li>
<li>
<h6><strong>JavaBean辅助</strong>：使用JavaBean封装部分业务逻辑</h6>
</li>
<li>
<h6><strong>流程</strong>：浏览器 → JSP → JavaBean → 数据库</h6>
</li>
</ul>
<pre class="language-mermaid"><code class="language-mermaid code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">graph</span> LR
</span><span class="code-line line-number" line="2">  Browser <span class="token arrow operator">--&gt;</span> JSP
</span><span class="code-line line-number" line="3">  JSP <span class="token arrow operator">--&gt;</span> JavaBean
</span><span class="code-line line-number" line="4">  JavaBean <span class="token arrow operator">--&gt;</span> Database
</span><span class="code-line line-number" line="5">  JavaBean <span class="token arrow operator">--&gt;</span> JSP
</span><span class="code-line line-number" line="6">  JSP <span class="token arrow operator">--&gt;</span> Browser
</span></code></pre>
<h5>2. 代码示例</h5>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%-- product.jsp --%&gt;
</span><span class="code-line line-number" line="2">&lt;%@ page import="com.example.ProductDAO" %&gt;
</span><span class="code-line line-number" line="3">&lt;%
</span><span class="code-line line-number" line="4">  // 控制逻辑（本应在Controller中）
</span><span class="code-line line-number" line="5">  String id = request.getParameter("id");
</span><span class="code-line line-number" line="6">  Product product = ProductDAO.getById(id);
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">  // 业务逻辑（本应在Model中）
</span><span class="code-line line-number" line="9">  if(product.getStock() &lt; 10) {
</span><span class="code-line line-number" line="10">      product.setPrice(product.getPrice() * 0.9); // 打折
</span><span class="code-line line-number" line="11">  }
</span><span class="code-line line-number" line="12">%&gt;
</span><span class="code-line line-number" line="13">&lt;!-- 显示逻辑（View） --&gt;
</span><span class="code-line line-number" line="14">&lt;html&gt;
</span><span class="code-line line-number" line="15">&lt;body&gt;
</span><span class="code-line line-number" line="16">  &lt;h1&gt;&lt;%= product.getName() %&gt;&lt;/h1&gt;
</span><span class="code-line line-number" line="17">  &lt;p&gt;价格: &lt;%= product.getPrice() %&gt;&lt;/p&gt;
</span><span class="code-line line-number" line="18">  &lt;p&gt;库存: &lt;%= product.getStock() %&gt;&lt;/p&gt;
</span><span class="code-line line-number" line="19">&lt;/body&gt;
</span><span class="code-line line-number" line="20">&lt;/html&gt;
</span></code></pre>
<h5>3. 优点</h5>
<ul>
<li>
<h6><strong>简单直接</strong>：适合小型应用快速开发</h6>
</li>
<li>
<h6><strong>学习成本低</strong>：不需要复杂的设计</h6>
</li>
<li>
<h6><strong>开发速度快</strong>：所有代码在一个文件中</h6>
</li>
</ul>
<h5>4. 缺点</h5>
<ul>
<li>
<h6><strong>紧耦合</strong>：展示逻辑与业务逻辑混杂</h6>
</li>
<li>
<h6><strong>难以维护</strong>：随着功能增加代码变得混乱</h6>
</li>
<li>
<h6><strong>复用性差</strong>：组件之间高度依赖</h6>
</li>
<li>
<h6><strong>不适合团队开发</strong>：难以分工协作</h6>
</li>
</ul>
</blockquote>
</li>
<li>
<h4>Model2架构</h4>
<blockquote>
<h5>1. 基本结构</h5>
<p>Model2是真正的MVC实现，主要特点：</p>
<ul>
<li>
<h6><strong>Servlet作为Controller</strong>：处理所有请求和控制流程</h6>
</li>
<li>
<h6><strong>JSP作为View</strong>：仅负责显示</h6>
</li>
<li>
<h6><strong>JavaBean作为Model</strong>：封装业务逻辑和数据访问</h6>
</li>
<li>
<h6><strong>流程</strong>：浏览器 → Servlet → JavaBean → 数据库 → JSP → 浏览器</h6>
</li>
</ul>
<pre class="language-mermaid"><code class="language-mermaid code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">graph</span> LR
</span><span class="code-line line-number" line="2">  Browser <span class="token arrow operator">--&gt;</span> Servlet
</span><span class="code-line line-number" line="3">  Servlet <span class="token arrow operator">--&gt;</span> JavaBean
</span><span class="code-line line-number" line="4">  JavaBean <span class="token arrow operator">--&gt;</span> Database
</span><span class="code-line line-number" line="5">  JavaBean <span class="token arrow operator">--&gt;</span> Servlet
</span><span class="code-line line-number" line="6">  Servlet <span class="token arrow operator">--&gt;</span> JSP
</span><span class="code-line line-number" line="7">  JSP <span class="token arrow operator">--&gt;</span> Browser
</span></code></pre>
<h5>2. 代码示例</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// ProductController.java (Servlet)</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> 
</span><span class="code-line line-number" line="4">          <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6">      <span class="token comment">// 1. 获取参数</span>
</span><span class="code-line line-number" line="7">      <span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9">      <span class="token comment">// 2. 调用Model</span>
</span><span class="code-line line-number" line="10">      <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token class-name">ProductService</span><span class="token punctuation">.</span><span class="token function">getProduct</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">
</span><span class="code-line line-number" line="12">      <span class="token comment">// 3. 业务逻辑处理</span>
</span><span class="code-line line-number" line="13">      <span class="token keyword">if</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">          <span class="token class-name">PricingService</span><span class="token punctuation">.</span><span class="token function">applyDiscount</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用定价服务</span>
</span><span class="code-line line-number" line="15">      <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">      <span class="token comment">// 4. 设置视图属性</span>
</span><span class="code-line line-number" line="18">      request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"product"</span><span class="token punctuation">,</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20">      <span class="token comment">// 5. 转发到View</span>
</span><span class="code-line line-number" line="21">      request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/productView.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="23"><span class="token punctuation">}</span>
</span></code></pre>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%-- productView.jsp --%&gt;
</span><span class="code-line line-number" line="2">&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
</span><span class="code-line line-number" line="3">&lt;html&gt;
</span><span class="code-line line-number" line="4">&lt;body&gt;
</span><span class="code-line line-number" line="5">  &lt;h1&gt;${product.name}&lt;/h1&gt;
</span><span class="code-line line-number" line="6">  &lt;p&gt;价格: ${product.price}&lt;/p&gt;
</span><span class="code-line line-number" line="7">  &lt;p&gt;库存: ${product.stock}&lt;/p&gt;
</span><span class="code-line line-number" line="8">&lt;/body&gt;
</span><span class="code-line line-number" line="9">&lt;/html&gt;
</span></code></pre>
<h5>3. 优点</h5>
<ul>
<li>
<h6><strong>松耦合</strong>：各组件职责分离</h6>
</li>
<li>
<h6><strong>可维护性高</strong>：代码结构清晰</h6>
</li>
<li>
<h6><strong>可扩展性强</strong>：易于添加新功能</h6>
</li>
<li>
<h6><strong>适合团队开发</strong>：前端和后端可以并行工作</h6>
</li>
<li>
<h6><strong>可测试性</strong>：组件可以单独测试</h6>
</li>
</ul>
<h5>4. 缺点</h5>
<ul>
<li>
<h6><strong>复杂度高</strong>：需要更多设计和规划</h6>
</li>
<li>
<h6><strong>学习曲线陡峭</strong>：需要理解多个组件的交互</h6>
</li>
<li>
<h6><strong>开发速度慢</strong>：初期需要更多架构设计</h6>
</li>
</ul>
</blockquote>
</li>
<li>
<h4>Model1 vs Model2 对比</h4>
</li>
</ul>























































<table><thead><tr><th>特性</th><th>Model1</th><th>Model2</th></tr></thead><tbody><tr><td><strong>架构模式</strong></td><td>页面中心</td><td>MVC模式</td></tr><tr><td><strong>控制中心</strong></td><td>JSP</td><td>Servlet</td></tr><tr><td><strong>耦合度</strong></td><td>高</td><td>低</td></tr><tr><td><strong>代码分离</strong></td><td>混合</td><td>清晰分层</td></tr><tr><td><strong>适合项目规模</strong></td><td>小型应用</td><td>中大型应用</td></tr><tr><td><strong>团队协作</strong></td><td>困难</td><td>容易</td></tr><tr><td><strong>维护成本</strong></td><td>高（随着规模增大）</td><td>低</td></tr><tr><td><strong>技术门槛</strong></td><td>低</td><td>较高</td></tr><tr><td><strong>典型框架</strong></td><td>纯JSP</td><td>Spring MVC, Struts等</td></tr></tbody></table>
<h3>4、servlet过滤器中的doFilter()方法</h3>
<p><code>doFilter()</code> 是 Servlet 过滤器的核心方法，负责实现过滤器的具体逻辑。下面从多个维度全面讲解这个方法的使用和原理。</p>
<ul>
<li>
<h4>方法签名与参数</h4>
</li>
</ul>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> 
</span><span class="code-line line-number" line="2">                    <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="3">                    <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">        <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span><span class="token punctuation">;</span>
</span></code></pre>

























<table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>request</code></td><td><code>ServletRequest</code></td><td>封装客户端请求信息，可强制转换为<code>HttpServletRequest</code></td></tr><tr><td><code>response</code></td><td><code>ServletResponse</code></td><td>封装服务器响应信息，可强制转换为<code>HttpServletResponse</code></td></tr><tr><td><code>chain</code></td><td><code>FilterChain</code></td><td>过滤器链对象，用于将请求传递给下一个过滤器或目标资源</td></tr></tbody></table>
<ul>
<li>
<h4>方法执行流程</h4>
</li>
</ul>
<pre class="language-mermaid"><code class="language-mermaid code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">sequenceDiagram</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">participant</span> Client
</span><span class="code-line line-number" line="3">    <span class="token keyword">participant</span> Filter1
</span><span class="code-line line-number" line="4">    <span class="token keyword">participant</span> Filter2
</span><span class="code-line line-number" line="5">    <span class="token keyword">participant</span> Servlet
</span><span class="code-line line-number" line="6">    <span class="token keyword">participant</span> Response
</span><span class="code-line line-number" line="7">    
</span><span class="code-line line-number" line="8">    Client<span class="token arrow operator">-&gt;&gt;</span>Filter1<span class="token operator">:</span> 请求
</span><span class="code-line line-number" line="9">    Filter1<span class="token arrow operator">-&gt;&gt;</span>Filter2<span class="token operator">:</span> chain.doFilter<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="10">    Filter2<span class="token arrow operator">-&gt;&gt;</span>Servlet<span class="token operator">:</span> chain.doFilter<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="11">    Servlet<span class="token arrow operator">--&gt;&gt;</span>Filter2<span class="token operator">:</span> 生成响应
</span><span class="code-line line-number" line="12">    Filter2<span class="token arrow operator">--&gt;&gt;</span>Filter1<span class="token operator">:</span> 返回响应
</span><span class="code-line line-number" line="13">    Filter1<span class="token arrow operator">--&gt;&gt;</span>Client<span class="token operator">:</span> 返回响应
</span></code></pre>
<ul>
<li>
<h4>基础使用示例</h4>
</li>
</ul>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoggingFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    
</span><span class="code-line line-number" line="3">    <span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="4">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">        <span class="token comment">// 初始化代码</span>
</span><span class="code-line line-number" line="6">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">    <span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="9">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="10">            <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">        
</span><span class="code-line line-number" line="12">        <span class="token comment">// 1. 预处理逻辑（请求到达目标资源前执行）</span>
</span><span class="code-line line-number" line="13">        <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">        <span class="token class-name">HttpServletRequest</span> httpReq <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Request URI: "</span> <span class="token operator">+</span> httpReq<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">        
</span><span class="code-line line-number" line="17">        <span class="token comment">// 2. 将请求传递给过滤器链中的下一个组件</span>
</span><span class="code-line line-number" line="18">        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 关键调用！</span>
</span><span class="code-line line-number" line="19">        
</span><span class="code-line line-number" line="20">        <span class="token comment">// 3. 后处理逻辑（目标资源处理完成后执行）</span>
</span><span class="code-line line-number" line="21">        <span class="token keyword">long</span> duration <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Request processed in "</span> <span class="token operator">+</span> duration <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="23">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="24">
</span><span class="code-line line-number" line="25">    <span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="26">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="27">        <span class="token comment">// 清理代码</span>
</span><span class="code-line line-number" line="28">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="29"><span class="token punctuation">}</span>
</span></code></pre>
<ul>
<li>
<h4>典型应用场景</h4>
<blockquote>
<h5>1. 请求/响应修改</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token comment">// 包装请求对象</span>
</span><span class="code-line line-number" line="6"><span class="token class-name">HttpServletRequest</span> wrappedRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomRequestWrapper</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token comment">// 包装响应对象</span>
</span><span class="code-line line-number" line="9"><span class="token class-name">HttpServletResponse</span> wrappedResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomResponseWrapper</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>wrappedRequest<span class="token punctuation">,</span> wrappedResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13"><span class="token comment">// 处理响应</span>
</span><span class="code-line line-number" line="14"><span class="token class-name">String</span> content <span class="token operator">=</span> wrappedResponse<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15"><span class="token comment">// 修改响应内容...</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span></code></pre>
<h5>2. 认证/授权检查</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token class-name">HttpServletRequest</span> httpReq <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token class-name">HttpSession</span> session <span class="token operator">=</span> httpReq<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">  <span class="token comment">// 未登录，重定向到登录页</span>
</span><span class="code-line line-number" line="10">  <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span>resp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">  <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// 注意：必须return，否则会继续执行过滤器链</span>
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token comment">// 已认证，继续执行</span>
</span><span class="code-line line-number" line="15">chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span></code></pre>
<h5>3. 日志记录</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token class-name">String</span> clientIP <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token class-name">String</span> requestURI <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token class-name">String</span> method <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9">log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Request from {}: {} {}"</span><span class="token punctuation">,</span> clientIP<span class="token punctuation">,</span> method<span class="token punctuation">,</span> requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">  chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13"><span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">  <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span>resp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15">  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Response status: {}"</span><span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17"><span class="token punctuation">}</span>
</span></code></pre>
<h5>4. 编码设置</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token annotation punctuation">@Override</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token comment">// 设置请求编码</span>
</span><span class="code-line line-number" line="6">req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token comment">// 设置响应编码</span>
</span><span class="code-line line-number" line="9">resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">
</span><span class="code-line line-number" line="12">chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13"><span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
</ul>
<h3>5、session中的invalidate()方法</h3>
<p><code>invalidate()</code> 是 HttpSession 接口中的一个关键方法，用于立即终止当前会话。下面从多个方面全面讲解这个方法的使用和原理。</p>
<ul>
<li>
<h4>方法定义与作用</h4>
<blockquote>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">void</span> <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">;</span>
</span></code></pre>
<h5><strong>功能</strong>：</h5>
<ul>
<li>
<p>立即使当前会话失效</p>
</li>
<li>
<p>清除会话中所有绑定的属性</p>
</li>
<li>
<p>释放会话占用的服务器资源</p>
</li>
</ul>
</blockquote>
</li>
<li>
<h4>典型使用场景</h4>
<blockquote>
<h5>1. 用户注销登录</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 用户注销处理</span>
</span><span class="code-line line-number" line="2"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/logout"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">logout</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4"><span class="token comment">// 获取当前会话并使其失效</span>
</span><span class="code-line line-number" line="5"><span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">  session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 终止会话</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9"><span class="token keyword">return</span> <span class="token string">"redirect:/login"</span><span class="token punctuation">;</span>  <span class="token comment">// 重定向到登录页</span>
</span><span class="code-line line-number" line="10"><span class="token punctuation">}</span>
</span></code></pre>
<h5>2. 会话超时强制处理</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 检查会话是否有效</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">if</span> <span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 清除无效会话</span>
</span><span class="code-line line-number" line="4"><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">SessionExpiredException</span><span class="token punctuation">(</span><span class="token string">"会话已过期"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>方法执行效果</h4>
</li>
</ul>





























<table><thead><tr><th>操作对象</th><th>失效后表现</th></tr></thead><tbody><tr><td><strong>当前会话</strong></td><td>立即变为无效状态，后续访问会抛出IllegalStateException</td></tr><tr><td><strong>会话属性</strong></td><td>所有通过setAttribute()设置的属性被永久清除</td></tr><tr><td><strong>会话ID</strong></td><td>原会话ID作废，如果创建新会话会分配新ID</td></tr><tr><td><strong>关联的Cookie</strong></td><td>客户端存储的JSESSIONID变为无效（但需客户端清除）</td></tr><tr><td><strong>服务器资源</strong></td><td>释放会话占用的内存存储</td></tr></tbody></table>
<ul>
<li>
<h4>使用注意事项</h4>
<blockquote>
<h5>1. 异常处理</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalStateException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4"><span class="token comment">// 会话已经无效时调用invalidate()会抛出此异常</span>
</span><span class="code-line line-number" line="5">logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"尝试失效已无效的会话"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span>
</span></code></pre>
<h5>2. 与getSession()的配合</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 错误用法：可能创建新会话</span>
</span><span class="code-line line-number" line="2">session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 如果会话不存在会新建</span>
</span><span class="code-line line-number" line="3">session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token comment">// 正确用法：先检查是否存在</span>
</span><span class="code-line line-number" line="6">session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 不创建新会话</span>
</span><span class="code-line line-number" line="7"><span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span></code></pre>
<h5>3. 并发访问问题</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 线程1</span>
</span><span class="code-line line-number" line="2"><span class="token class-name">Object</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token comment">// 线程2</span>
</span><span class="code-line line-number" line="5">session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 会使线程1的后续操作失败</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token comment">// 解决方案：同步访问</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">synchronized</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9"><span class="token comment">// 会话操作</span>
</span><span class="code-line line-number" line="10"><span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>与相关方法的对比</h4>
</li>
</ul>








































<table><thead><tr><th>方法</th><th>作用</th><th>是否清除属性</th><th>是否释放资源</th><th>是否使会话ID失效</th></tr></thead><tbody><tr><td><code>invalidate()</code></td><td>立即终止会话</td><td>是</td><td>是</td><td>是</td></tr><tr><td><code>removeAttribute()</code></td><td>移除单个属性</td><td>仅指定属性</td><td>否</td><td>否</td></tr><tr><td><code>setMaxInactiveInterval(-1)</code></td><td>设置会话永不过期</td><td>否</td><td>否</td><td>否</td></tr><tr><td>自然超时</td><td>超过不活动间隔后由容器自动清理</td><td>是</td><td>是</td><td>是</td></tr></tbody></table>
<ul>
<li>
<h4>底层实现原理</h4>
<blockquote>
<ol>
<li>
<h5><strong>会话存储清理</strong>：</h5>
</li>
</ol>
<ul>
<li>
<p>从服务器的会话管理器中移除该会话</p>
</li>
<li>
<p>触发所有<code>HttpSessionAttributeListener</code>的attributeRemoved事件</p>
</li>
<li>
<p>触发<code>HttpSessionListener</code>的sessionDestroyed事件</p>
</li>
</ul>
<ol start="2">
<li>
<h5><strong>会话状态标记</strong>：</h5>
</li>
</ol>
<ul>
<li>
<p>会话对象被标记为"invalid"状态</p>
</li>
<li>
<p>后续任何访问该会话的尝试都会抛出IllegalStateException</p>
</li>
</ul>
<ol start="3">
<li>
<h5><strong>客户端影响</strong>：</h5>
</li>
</ol>
<ul>
<li>
<p>服务器无法直接删除客户端的JSESSIONID Cookie</p>
</li>
<li>
<p>通常需要配合设置Cookie过期实现完全注销：</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">if</span> <span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"JSESSIONID"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">        cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 立即过期</span>
</span><span class="code-line line-number" line="5">        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span></code></pre>
</li>
</ul>
</blockquote>
</li>
</ul>
<h3>6、request中的getRemoteHost()方法</h3>
<p><code>getRemoteHost()</code> 是 HttpServletRequest 接口中用于获取客户端主机名的方法。下面从多个方面全面讲解这个方法的使用和注意事项。</p>
<ul>
<li>
<h4>方法定义</h4>
</li>
</ul>
<blockquote>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token class-name">String</span> <span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h5><strong>返回值</strong>：</h5>
<p>返回发送请求的客户端的主机名（Hostname），如果无法解析则返回客户端的IP地址</p>
</blockquote>
<ul>
<li>
<h4>基础使用示例</h4>
<blockquote>
<h5>1. 基本用法</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> 
</span><span class="code-line line-number" line="2">  <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token class-name">String</span> clientHost <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Client Host: "</span> <span class="token operator">+</span> clientHost<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span>
</span></code></pre>
<h5>2. 结合其他客户端信息</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token class-name">String</span> clientInfo <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Host: %s, IP: %s, Port: %d"</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="2">  request<span class="token punctuation">.</span><span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="3">  request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="4">  request<span class="token punctuation">.</span><span class="token function">getRemotePort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Request from: "</span> <span class="token operator">+</span> clientInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>方法特性</h4>
</li>
</ul>

























<table><thead><tr><th>特性</th><th>说明</th></tr></thead><tbody><tr><td><strong>解析行为</strong></td><td>尝试对客户端IP进行反向DNS解析获取主机名</td></tr><tr><td><strong>性能影响</strong></td><td>可能较耗时（涉及DNS查询）</td></tr><tr><td><strong>代理影响</strong></td><td>直接获取的是与服务器建立TCP连接的客户端信息</td></tr><tr><td><strong>缓存机制</strong></td><td>部分容器会缓存DNS查询结果</td></tr></tbody></table>
<ul>
<li>
<h4>与相关方法的对比</h4>
</li>
</ul>

































<table><thead><tr><th>方法</th><th>返回内容</th><th>是否DNS解析</th><th>性能</th><th>典型返回值示例</th></tr></thead><tbody><tr><td><code>getRemoteHost()</code></td><td>主机名</td><td>是</td><td>较慢</td><td>"client-123.example.com"</td></tr><tr><td><code>getRemoteAddr()</code></td><td>IP地址</td><td>否</td><td>快</td><td>"192.168.1.100"</td></tr><tr><td><code>getRemotePort()</code></td><td>端口号</td><td>否</td><td>快</td><td>54321</td></tr></tbody></table>
<ul>
<li>
<h4>实际应用场景</h4>
<blockquote>
<h5>1. 访问日志记录</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 记录带主机名的访问日志</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logAccess</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3"><span class="token class-name">String</span> logEntry <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"[%s] %s %s from %s (%s)"</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="4">      <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="5">      request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="6">      request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="7">      request<span class="token punctuation">.</span><span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="8">      request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">accessLogger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>logEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11"><span class="token punctuation">}</span>
</span></code></pre>
<h5>2. 访问控制</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 基于主机名的简单访问控制</span>
</span><span class="code-line line-number" line="2"><span class="token class-name">String</span> host <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">if</span> <span class="token punctuation">(</span>host<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".trusted-domain.com"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4"><span class="token comment">// 允许受信任域的主机访问</span>
</span><span class="code-line line-number" line="5">chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">response<span class="token punctuation">.</span><span class="token function">sendError</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">.</span><span class="token constant">SC_FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
</ul>
<h2>三、填空题（8×3）</h2>
<h3>1、HTTP请求方法功能</h3>
<ul>
<li>GET：获取服务器信息，作为响应返回</li>
<li>POST：用于客户端向服务器提交数据</li>
</ul>
<h3>2、运行程序类型</h3>
<ul>
<li>
<p>CS、BS</p>
</li>
<li>
<p>Client server、browser server</p>
</li>
<li>
<h4>基本概念对比</h4>
</li>
</ul>



































<table><thead><tr><th>特性</th><th>CS架构（Client-Server）</th><th>BS架构（Browser-Server）</th></tr></thead><tbody><tr><td><strong>全称</strong></td><td>Client/Server 架构</td><td>Browser/Server 架构</td></tr><tr><td><strong>客户端形式</strong></td><td>需要安装专用客户端程序</td><td>只需标准浏览器</td></tr><tr><td><strong>典型应用</strong></td><td>QQ、Photoshop、ERP系统</td><td>淘宝网、Gmail、网上银行</td></tr><tr><td><strong>网络要求</strong></td><td>通常需要持续稳定连接</td><td>支持断断续续的连接</td></tr><tr><td><strong>更新维护</strong></td><td>客户端需要单独更新</td><td>服务端更新后所有用户立即获得新版本</td></tr></tbody></table>
<ul>
<li>
<h4>CS架构深度解析</h4>
</li>
</ul>
<blockquote>
<h5>1. 技术组成</h5>
<pre class="language-mermaid"><code class="language-mermaid code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">graph</span> LR
</span><span class="code-line line-number" line="2">A<span class="token text string">[客户端程序]</span> <span class="token arrow operator">--&gt;</span><span class="token label property">|TCP/IP|</span> B<span class="token text string">[服务器]</span>
</span><span class="code-line line-number" line="3">A <span class="token arrow operator">--&gt;</span> C<span class="token text string">[本地数据库缓存]</span>
</span><span class="code-line line-number" line="4">B <span class="token arrow operator">--&gt;</span> D<span class="token text string">[中心数据库]</span>
</span></code></pre>
<h5>2. 优势特点</h5>
<ul>
<li>
<h6><strong>性能高效</strong>：客户端可分担计算压力</h6>
</li>
<li>
<h6><strong>功能强大</strong>：可充分利用本地系统资源</h6>
</li>
<li>
<h6><strong>界面丰富</strong>：支持复杂UI和交互设计</h6>
</li>
<li>
<h6><strong>离线操作</strong>：部分功能可离线使用</h6>
</li>
</ul>
<h5>3. 代码示例（Java Socket客户端）</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChatClient</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">      <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">           <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">           <span class="token class-name">BufferedReader</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">      <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">          <span class="token comment">// 发送请求</span>
</span><span class="code-line line-number" line="8">          out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"GET_USER_INFO 1001"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">          <span class="token comment">// 接收响应</span>
</span><span class="code-line line-number" line="11">          <span class="token class-name">String</span> response <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">          <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"服务器响应: "</span> <span class="token operator">+</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14">      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">          e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">      <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="18"><span class="token punctuation">}</span>
</span></code></pre>
<h5>4. 适用场景</h5>
<ul>
<li>高频交互的专业软件（如IDE、CAD）</li>
<li>对图形性能要求高的应用（3D建模、游戏）</li>
<li>需要访问本地硬件的程序（打印机、扫描仪）</li>
</ul>
</blockquote>
<ul>
<li>
<h4>BS架构深度解析</h4>
</li>
</ul>
<blockquote>
<h5>1. 技术组成</h5>
<pre class="language-mermaid"><code class="language-mermaid code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">graph</span> LR
</span><span class="code-line line-number" line="2">A<span class="token text string">[浏览器]</span> <span class="token arrow operator">--&gt;</span><span class="token label property">|HTTP/HTTPS|</span> B<span class="token text string">[Web服务器]</span>
</span><span class="code-line line-number" line="3">B <span class="token arrow operator">--&gt;</span> C<span class="token text string">[应用服务器]</span>
</span><span class="code-line line-number" line="4">C <span class="token arrow operator">--&gt;</span> D<span class="token text string">[数据库]</span>
</span><span class="code-line line-number" line="5">A <span class="token arrow operator">--&gt;</span> E<span class="token text string">[HTML/CSS/JS]</span>
</span></code></pre>
<h5>2. 优势特点</h5>
<ul>
<li>
<h6><strong>跨平台性</strong>：Windows/Mac/Linux/手机均可访问</h6>
</li>
<li>
<h6><strong>零安装</strong>：无需单独安装客户端</h6>
</li>
<li>
<h6><strong>易于维护</strong>：只需维护服务端代码</h6>
</li>
<li>
<h6><strong>安全性高</strong>：业务逻辑在服务端执行</h6>
</li>
</ul>
<h5>3. 代码示例（Spring Boot服务端）</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token annotation punctuation">@RestController</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">  <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/api/users/{id}"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="5">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">      <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">      <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span></code></pre>
<h5>4. 前端交互（JavaScript）</h5>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/users/1001'</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="2">  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token arrow operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'获取用户:'</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">      <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">textContent</span> <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h5>5. 适用场景</h5>
<ul>
<li>电子商务平台</li>
<li>内容管理系统</li>
<li>企业OA系统</li>
<li>跨地域协作应用</li>
</ul>
</blockquote>
<ul>
<li>
<h4>核心差异对比</h4>
</li>
</ul>



































<table><thead><tr><th>比较维度</th><th>CS架构</th><th>BS架构</th></tr></thead><tbody><tr><td><strong>部署成本</strong></td><td>高（需部署客户端）</td><td>低（只需部署服务端）</td></tr><tr><td><strong>计算分布</strong></td><td>客户端承担部分计算</td><td>计算集中在服务端</td></tr><tr><td><strong>数据安全</strong></td><td>数据可能存储在客户端</td><td>数据集中存储在服务端</td></tr><tr><td><strong>网络带宽</strong></td><td>传输结构化数据，流量较小</td><td>传输HTML等资源，流量较大</td></tr><tr><td><strong>用户体验</strong></td><td>响应快，交互流畅</td><td>依赖网络质量，可能有延迟</td></tr></tbody></table>
<h3>3、Ajax核心</h3>
<ul>
<li>
<p>对象：<code>XMLHttpRequest</code></p>
</li>
<li>
<p>特点：异步无刷新通信</p>
</li>
<li>
<h4>AJAX 核心对象：XMLHttpRequest</h4>
<blockquote>
<h5>1. 对象创建</h5>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 现代浏览器创建方式</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token comment">// 兼容旧版IE的创建方式（IE5-6）</span>
</span><span class="code-line line-number" line="5"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ActiveXObject</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span></code></pre>
<h5>2. 核心方法</h5>

























<table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>open(method, url, async)</code></td><td>初始化请求（GET/POST等）</td></tr><tr><td><code>send([body])</code></td><td>发送请求（可选请求体）</td></tr><tr><td><code>abort()</code></td><td>终止当前请求</td></tr><tr><td><code>setRequestHeader(header, value)</code></td><td>设置请求头</td></tr></tbody></table>
<h5>3. 重要属性</h5>





























<table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>readyState</code></td><td>请求状态（0-4）</td></tr><tr><td><code>status</code></td><td>HTTP状态码（200,404等）</td></tr><tr><td><code>responseText</code></td><td>文本响应数据</td></tr><tr><td><code>responseXML</code></td><td>XML格式响应数据</td></tr><tr><td><code>onreadystatechange</code></td><td>状态改变事件处理器</td></tr></tbody></table>
</blockquote>
</li>
<li>
<h4>AJAX 工作原理</h4>
</li>
</ul>
<pre class="language-mermaid"><code class="language-mermaid code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">sequenceDiagram</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">participant</span> Browser
</span><span class="code-line line-number" line="3">    <span class="token keyword">participant</span> XMLHttpRequest
</span><span class="code-line line-number" line="4">    <span class="token keyword">participant</span> Server
</span><span class="code-line line-number" line="5">    
</span><span class="code-line line-number" line="6">    Browser<span class="token arrow operator">-&gt;&gt;</span>XMLHttpRequest<span class="token operator">:</span> 创建XHR对象
</span><span class="code-line line-number" line="7">    Browser<span class="token arrow operator">-&gt;&gt;</span>XMLHttpRequest<span class="token operator">:</span> 设置回调函数
</span><span class="code-line line-number" line="8">    XMLHttpRequest<span class="token arrow operator">-&gt;&gt;</span>Server<span class="token operator">:</span> 发送异步请求
</span><span class="code-line line-number" line="9">    Server<span class="token arrow operator">--&gt;&gt;</span>XMLHttpRequest<span class="token operator">:</span> 返回响应数据
</span><span class="code-line line-number" line="10">    XMLHttpRequest<span class="token arrow operator">-&gt;&gt;</span>Browser<span class="token operator">:</span> 触发回调
</span><span class="code-line line-number" line="11">    Browser<span class="token arrow operator">-&gt;&gt;</span>Browser<span class="token operator">:</span> 更新DOM
</span></code></pre>
<ul>
<li>
<h4>AJAX 主要特点</h4>
<blockquote>
<h5>1. 异步通信</h5>
<ul>
<li>
<h6><strong>非阻塞模式</strong>：请求发送后浏览器可继续其他操作</h6>
</li>
<li>
<h6><strong>回调机制</strong>：通过事件监听处理响应</h6>
</li>
</ul>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1">xhr<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token property-access">readyState</span> <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span><span class="token property-access">status</span> <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">      <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token property-access">responseText</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<h5>2. 局部更新</h5>
<ul>
<li>
<h6><strong>无需刷新</strong>：只更新页面部分内容</h6>
</li>
<li>
<h6><strong>高效传输</strong>：仅传输必要数据而非整个页面</h6>
</li>
</ul>
<h5>3. 多种数据格式支持</h5>
<ul>
<li>
<h6><strong>文本数据</strong>：<code>responseText</code></h6>
</li>
<li>
<h6><strong>XML数据</strong>：<code>responseXML</code></h6>
</li>
<li>
<h6><strong>JSON数据</strong>（需配合<code>JSON.parse()</code>）</h6>
</li>
</ul>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token property-access">responseText</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h5>4. 跨域控制</h5>
<ul>
<li>
<h6><strong>同源策略</strong>：默认只能访问同源资源</h6>
</li>
<li>
<h6><strong>CORS支持</strong>：通过服务端设置实现跨域</h6>
</li>
<li>
<h6><strong>JSONP替代</strong>：通过<code>&lt;script&gt;</code>标签跨域</h6>
</li>
</ul>
</blockquote>
</li>
<li>
<h4>完整使用示例</h4>
<blockquote>
<h5>1. GET 请求示例</h5>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">function</span> <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">xhr<span class="token punctuation">.</span><span class="token method function property-access">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"/api/data?id=123"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">xhr<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token property-access">status</span> <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token property-access">responseText</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">      <span class="token function">renderData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">      <span class="token function">showError</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token property-access">statusText</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14">xhr<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">  <span class="token function">showError</span><span class="token punctuation">(</span><span class="token string">"Network Error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18">xhr<span class="token punctuation">.</span><span class="token method function property-access">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19"><span class="token punctuation">}</span>
</span></code></pre>
<h5>2. POST 请求示例</h5>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">function</span> <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">"myForm"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">xhr<span class="token punctuation">.</span><span class="token method function property-access">open</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"/api/submit"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">xhr<span class="token punctuation">.</span><span class="token method function property-access">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"application/json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">xhr<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token property-access">readyState</span> <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token property-access">status</span> <span class="token operator">===</span> <span class="token number">201</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">          <span class="token function">showSuccess</span><span class="token punctuation">(</span><span class="token string">"提交成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">      <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="13">          <span class="token function">showError</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token property-access">responseText</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">      <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="15">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18">xhr<span class="token punctuation">.</span><span class="token method function property-access">send</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19"><span class="token punctuation">}</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>现代替代方案（Fetch API）</h4>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 使用更现代的Fetch API</span>
</span><span class="code-line line-number" line="2"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/data'</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">    <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span><span class="token property-access">ok</span><span class="token punctuation">)</span> <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token property-access">statusText</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">        <span class="token keyword control-flow">return</span> response<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">    <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token arrow operator">=&gt;</span> <span class="token function">renderData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8">    <span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token arrow operator">=&gt;</span> <span class="token function">showError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</li>
</ul>
<h3>4、URL（统一资源定位器）定义</h3>
<p>URL（Uniform Resource Locator，统一资源定位符）是互联网上用于标识和定位资源的字符串，由Tim Berners-Lee于1994年在RFC 1738中提出。</p>
<pre class="language-mermaid"><code class="language-mermaid code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">graph</span> LR
</span><span class="code-line line-number" line="2">    A<span class="token text string">[URL]</span> <span class="token arrow operator">--&gt;</span> B<span class="token text string">[定位网络资源]</span>
</span><span class="code-line line-number" line="3">    A <span class="token arrow operator">--&gt;</span> C<span class="token text string">[标识资源类型]</span>
</span><span class="code-line line-number" line="4">    A <span class="token arrow operator">--&gt;</span> D<span class="token text string">[指定访问方法]</span>
</span></code></pre>
<ul>
<li>
<h4>URL完整结构</h4>
<pre><code class="code-highlight"><span class="code-line line-number" line="1">  https://www.example.com:8080/path/to/page?name=ferret&amp;color=purple#section2
</span><span class="code-line line-number" line="2">  \___/   \_____________/\__/\__________/ \______________________/ \_______/
</span><span class="code-line line-number" line="3">    |           |         |       |                |                   |
</span><span class="code-line line-number" line="4">  协议      主机名      端口    路径             查询参数             片段标识
</span></code></pre>
</li>
<li>
<h4>核心组成部分详解</h4>
<blockquote>
<h5>1. 协议（Scheme）</h5>
<ul>
<li>定义访问资源使用的协议</li>
<li>常见协议：</li>
<li><code>http</code>：超文本传输协议</li>
<li><code>https</code>：加密的HTTP</li>
<li><code>ftp</code>：文件传输协议</li>
<li><code>mailto</code>：电子邮件地址</li>
<li><code>file</code>：本地文件</li>
</ul>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 获取协议</span>
</span><span class="code-line line-number" line="2"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">location</span><span class="token punctuation">.</span><span class="token property-access">protocol</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "https:"</span>
</span></code></pre>
<h4>2. 主机名（Host）</h4>
<ul>
<li>域名或IP地址</li>
<li>可包含子域名</li>
<li>不区分大小写</li>
</ul>





















<table><thead><tr><th>示例</th><th>说明</th></tr></thead><tbody><tr><td><code>www.example.com</code></td><td>标准域名</td></tr><tr><td><code>127.0.0.1</code></td><td>IPv4地址</td></tr><tr><td><code>[2001:db8::1]</code></td><td>IPv6地址（需方括号）</td></tr></tbody></table>
<h5>3. 端口（Port）</h5>
<ul>
<li>网络服务的入口点</li>
<li>默认端口可省略：</li>
<li>HTTP默认80</li>
<li>HTTPS默认443</li>
</ul>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// Java中获取端口</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">int</span> port <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServerPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回实际端口</span>
</span></code></pre>
<h5>4. 路径（Path）</h5>
<ul>
<li>定位服务器上的具体资源</li>
<li>区分大小写（取决于服务器配置）</li>
<li>通常对应文件系统路径</li>
</ul>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># Flask中获取路径</span>
</span><span class="code-line line-number" line="2"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/user/&lt;username&gt;'</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">def</span> <span class="token function">show_user</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="4">  <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f'User </span><span class="token interpolation"><span class="token punctuation">{</span>username<span class="token punctuation">}</span></span><span class="token string">'</span></span>
</span></code></pre>
<h5>5. 查询字符串（Query）</h5>
<ul>
<li><code>?</code>后的键值对参数</li>
<li>格式：<code>key1=value1&amp;key2=value2</code></li>
<li>URL编码处理特殊字符</li>
</ul>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// URLSearchParams API</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'?name=张三&amp;age=20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "张三"</span>
</span></code></pre>
<h6>6. 片段标识（Fragment）</h6>
<ul>
<li><code>#</code>后的部分</li>
<li>通常用于页面内锚点定位</li>
<li>不会发送到服务器</li>
</ul>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#section2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>跳转到第二节<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>section2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>URL编码规范</h4>
<blockquote>
<h5>1. 编码必要性</h5>






























<table><thead><tr><th>字符</th><th>编码后</th><th>原因</th></tr></thead><tbody><tr><td>空格</td><td><code>%20</code></td><td>在URL中非法</td></tr><tr><td>中文</td><td><code>%E4%B8%AD</code></td><td>非ASCII字符</td></tr><tr><td>?</td><td><code>%3F</code></td><td>保留字符</td></tr><tr><td>/</td><td><code>%2F</code></td><td>保留字符</td></tr></tbody></table>
<h5>2. 编码解码方法</h5>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// JavaScript示例</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> encoded <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'参数=值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "%E5%8F%82%E6%95%B0%3D%E5%80%BC"</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">const</span> decoded <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>encoded<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// "参数=值"</span>
</span></code></pre>
</blockquote>
</li>
<li>
<h4>URL类型示例</h4>
</li>
</ul>
<blockquote>
<h5>1. 标准HTTP URL</h5>
<pre><code class="code-highlight"><span class="code-line line-number" line="1">https://www.amazon.com/dp/B08N5KWB9H/ref=sr_1_1?keywords=iphone&amp;qid=1630000000
</span></code></pre>
<h5>2. 文件URL</h5>
<pre><code class="code-highlight"><span class="code-line line-number" line="1">file:///C:/Users/Example/Documents/report.pdf
</span></code></pre>
<h3>3. 邮件URL</h3>
<pre><code class="code-highlight"><span class="code-line line-number" line="1">mailto:contact@example.com?subject=Feedback&amp;body=Hello
</span></code></pre>
<h5>4. 数据URL（Base64编码）</h5>
<pre><code class="code-highlight"><span class="code-line line-number" line="1">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAA...
</span></code></pre>
</blockquote>
<h3>5、配置命令中language的默认值</h3>
<p>在不同技术上下文中，"language"配置项的默认值各有不同，以下是主要场景的分析：</p>
<ul>
<li>
<h4>JSP 页面指令中的 language</h4>
<blockquote>
<pre><code class="language-jsp code-highlight"><span class="code-line line-number" line="1">&lt;%@ page language="java" %&gt;
</span></code></pre>
<ul>
<li>
<h5><strong>默认值</strong>：<code>"java"</code></h5>
</li>
<li>
<h5><strong>说明</strong>：</h5>
</li>
<li>
<p>JSP 2.0+ 规范明确规定的默认值</p>
</li>
<li>
<p>理论上容器可以支持其他脚本语言（如Groovy），但实际所有主流JSP容器仅支持Java</p>
</li>
<li>
<p>即使不显式声明，也默认使用Java作为脚本语言</p>
</li>
</ul>
</blockquote>
</li>
<li>
<h4>HTML lang 属性</h4>
</li>
</ul>
<blockquote>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<ul>
<li>
<h5><strong>默认值</strong>：无严格默认值（但强烈建议显式声明）</h5>
</li>
<li>
<h5><strong>最佳实践</strong>：</h5>
</li>
<li>
<p>根据内容设置正确语言代码（如<code>zh-CN</code>表示简体中文）</p>
</li>
<li>
<p>未声明可能导致屏幕阅读器无法正确发音</p>
</li>
</ul>
</blockquote>
<ul>
<li>
<h4>HTTP Header 中的语言设置</h4>
<blockquote>
<h5>1. Accept-Language 请求头</h5>
<pre><code class="code-highlight"><span class="code-line line-number" line="1">Accept-Language: en-US,en;q=0.9
</span></code></pre>
<ul>
<li>
<h6><strong>浏览器默认值</strong>：通常跟随操作系统语言设置</h6>
</li>
<li>
<h6><strong>影响</strong>：服务端可根据此头返回对应语言版本</h6>
</li>
</ul>
<h5>2. Content-Language 响应头</h5>
<pre><code class="code-highlight"><span class="code-line line-number" line="1">Content-Language: zh-CN
</span></code></pre>
<ul>
<li>
<h6><strong>默认值</strong>：无（需服务端显式设置）</h6>
</li>
</ul>
</blockquote>
</li>
</ul>
<h3>6、使用cookie基本步骤</h3>
<ul>
<li>创建cookie对象</li>
<li>传送cookie对象</li>
<li>读取cookie对象</li>
<li>设置对象有效时间</li>
</ul>
<p>Cookie 是服务器发送到用户浏览器并保存在本地的小型数据片段，主要用于：</p>
<blockquote>
<ul>
<li>
<h6><strong>会话管理</strong>：登录状态、购物车等</h6>
</li>
<li>
<h6><strong>个性化</strong>：用户偏好、主题设置</h6>
</li>
<li>
<h6><strong>追踪</strong>：分析用户行为</h6>
</li>
</ul>
</blockquote>
<h6></h6>
<ul>
<li>
<h4>Cookie 核心属性</h4>
</li>
</ul>


















































<table><thead><tr><th>属性</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>Name</td><td>Cookie名称</td><td><code>username</code></td></tr><tr><td>Value</td><td>Cookie值</td><td><code>john_doe</code></td></tr><tr><td>Domain</td><td>生效域名</td><td><code>.example.com</code></td></tr><tr><td>Path</td><td>生效路径</td><td><code>/products</code></td></tr><tr><td>Expires/Max-Age</td><td>过期时间</td><td><code>Wed, 21 Oct 2022 07:28:00 GMT</code></td></tr><tr><td>Secure</td><td>仅HTTPS传输</td><td><code>Secure</code></td></tr><tr><td>HttpOnly</td><td>禁止JS访问</td><td><code>HttpOnly</code></td></tr><tr><td>SameSite</td><td>跨站策略</td><td><code>Strict</code> <code>Lax</code> <code>None</code></td></tr></tbody></table>
<ul>
<li>
<h4>Cookie 使用基本步骤</h4>
</li>
</ul>
<blockquote>
<h5>1. 创建 Cookie 对象</h5>
<blockquote>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// Java Servlet 示例</span>
</span><span class="code-line line-number" line="2"><span class="token class-name">Cookie</span> userCookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"john_doe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</blockquote>
<blockquote>
<p>// JavaScript 示例
document.cookie = "username=john_doe; path=/; max-age=3600";</p>
<pre><code class="code-highlight"></code></pre>
</blockquote>
<blockquote>
<h6><strong>关键参数</strong>：</h6>
</blockquote>
<blockquote>
<ul>
<li>名称和值都必须是字符串</li>
<li>值不应包含空格、分号或逗号（需要时进行编码）</li>
</ul>
</blockquote>
<blockquote>
<h5></h5>
</blockquote>
<h5>2.传送 Cookie 对象</h5>
<blockquote>
<h6>服务器 → 客户端（设置Cookie）</h6>
</blockquote>
<blockquote>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// Java Servlet</span>
</span><span class="code-line line-number" line="2">response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>userCookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</blockquote>
<blockquote>
<p>// HTTP响应头
Set-Cookie: username=john_doe; Path=/; Max-Age=3600; HttpOnly</p>
<pre><code class="code-highlight"></code></pre>
</blockquote>
<blockquote>
<h6>客户端 → 服务器（携带Cookie）</h6>
</blockquote>
<blockquote>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 浏览器自动携带匹配的Cookie</span>
</span><span class="code-line line-number" line="2"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3"><span class="token literal-property property">credentials</span><span class="token operator">:</span> <span class="token string">'include'</span> <span class="token comment">// 确保发送Cookie</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</blockquote>
<blockquote>
<pre class="language-http"><code class="language-http code-highlight"><span class="code-line line-number" line="1"><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url"><span class="token path"><span class="token path-separator">/</span>api<span class="token path-separator">/</span>user</span></span> <span class="token http-version property">HTTP/1.1</span></span>
</span><span class="code-line line-number" line="2"><span class="token header"><span class="token header-name keyword">Cookie</span><span class="token punctuation">:</span> <span class="token header-value">username=john_doe; session_id=abc123</span></span>
</span></code></pre>
</blockquote>
<blockquote>
<h5></h5>
</blockquote>
<ol start="3">
<li>
<h5>读取 Cookie 对象</h5>
</li>
</ol>
<blockquote>
<h6>服务器端读取</h6>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// Java Servlet</span>
</span><span class="code-line line-number" line="2"><span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">      <span class="token class-name">String</span> username <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">      <span class="token comment">// 使用cookie值...</span>
</span><span class="code-line line-number" line="8">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10"><span class="token punctuation">}</span>
</span></code></pre>
<h6>客户端读取（JavaScript）</h6>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 获取所有Cookie字符串</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> allCookies <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">cookie</span><span class="token punctuation">;</span> <span class="token comment">// "username=john_doe; theme=dark"</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token comment">// 解析特定Cookie</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">function</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">cookie</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token keyword">const</span> parts <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token method function property-access">split</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>parts<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> parts<span class="token punctuation">.</span><span class="token method function property-access">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">split</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token keyword">const</span> username <span class="token operator">=</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</blockquote>
<ol start="4">
<li>
<h5>设置 Cookie 有效时间</h5>
</li>
</ol>
<blockquote>
<h6>会话级Cookie（浏览器关闭即失效）</h6>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"temp"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token comment">// 不设置maxAge或设置为-1</span>
</span><span class="code-line line-number" line="3">response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h6>持久化Cookie</h6>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"remember"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token comment">// 设置存活时间（秒）</span>
</span><span class="code-line line-number" line="3">cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30天</span>
</span><span class="code-line line-number" line="4">response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h6>立即删除Cookie</h6>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置为0表示删除</span>
</span><span class="code-line line-number" line="3">response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</blockquote>
</blockquote>
<ul>
<li>
<h4>完整示例：登录功能实现</h4>
<blockquote>
<h5>1. 服务器端设置Cookie（Java）</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> 
</span><span class="code-line line-number" line="2">  <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token class-name">String</span> remember <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"remember"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token comment">// 1. 创建会话Cookie</span>
</span><span class="code-line line-number" line="8"><span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token comment">// 2. 创建持久化Cookie（记住我）</span>
</span><span class="code-line line-number" line="12"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"on"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>remember<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="13">  <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"remember_token"</span><span class="token punctuation">,</span> <span class="token function">generateToken</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">  cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30天</span>
</span><span class="code-line line-number" line="15">  cookie<span class="token punctuation">.</span><span class="token function">setHttpOnly</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">  cookie<span class="token punctuation">.</span><span class="token function">setSecure</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17">  cookie<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">  response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21">response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/dashboard"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22"><span class="token punctuation">}</span>
</span></code></pre>
<h5>2. 客户端读取Cookie（JavaScript）</h5>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 检查深色模式偏好</span>
</span><span class="code-line line-number" line="2"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">cookie</span><span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token string">'theme=dark'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3"><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token property-access">classList</span><span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">'dark-mode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token comment">// 设置主题Cookie</span>
</span><span class="code-line line-number" line="7"><span class="token keyword">function</span> <span class="token function">setTheme</span><span class="token punctuation">(</span><span class="token parameter">theme</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8"><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">cookie</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">theme=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>theme<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; path=/; max-age=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">365</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span></code></pre>
<h5>3. 安全注意事项</h5>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 安全Cookie设置示例</span>
</span><span class="code-line line-number" line="2"><span class="token class-name">Cookie</span> secureCookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"secureFlag"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">secureCookie<span class="token punctuation">.</span><span class="token function">setHttpOnly</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 防止XSS攻击</span>
</span><span class="code-line line-number" line="4">secureCookie<span class="token punctuation">.</span><span class="token function">setSecure</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 仅HTTPS传输</span>
</span><span class="code-line line-number" line="5">secureCookie<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 限定路径</span>
</span><span class="code-line line-number" line="6">secureCookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>secureCookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</blockquote>
</li>
</ul>
<h3>7、JavaBean</h3>
<ul>
<li>定义与功能</li>
<li>实现结果与分类使用（将原来页面程序片段封装到javabean当中能够实现业务逻辑层与视图层的分离）</li>
</ul>
<h2>四、简答题（3×6）</h2>
<h3>1、JSP</h3>
<ul>
<li>定义</li>
</ul>
<p>JSP (JavaServer Pages) 是一种基于Java的技术，用于开发动态Web页面。它允许开发人员将Java代码嵌入HTML页面中，从而创建动态内容。JSP是Java EE (Enterprise Edition) 的一部分，是Servlet技术的扩展。
- 执行过程</p>
<h3>2、Servlet生命周期</h3>
<ul>
<li>初始化</li>
<li>处理请求</li>
<li>服务结果等</li>
</ul>
<h3>3、MVC</h3>
<ul>
<li>基本概念</li>
<li>基本原理</li>
<li>优缺点</li>
</ul>
<h2>五、编程题 (1×20)</h2>
<p>实现简单网页计算器（使用application对象，需补充代码，只需要补充js部分）：</p>
<ul>
<li>
<h3>HTML部分（计算器界面）</h3>
</li>
</ul>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="4">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>简单计算器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="5">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span></span><span class="code-line line-number" line="6"><span class="token style"><span class="token language-css">        <span class="token selector"><span class="token class">.calculator</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line line-number" line="7"><span class="token style"><span class="token language-css">            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="8"><span class="token style"><span class="token language-css">            <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">px</span> auto<span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="9"><span class="token style"><span class="token language-css">            <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="10"><span class="token style"><span class="token language-css">            <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid <span class="token hexcode color">#ccc</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="11"><span class="token style"><span class="token language-css">            <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="12"><span class="token style"><span class="token language-css">            <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">10</span><span class="token unit">px</span> <span class="token color"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="13"><span class="token style"><span class="token language-css">        <span class="token punctuation">}</span>
</span></span></span><span class="code-line line-number" line="14"><span class="token style"><span class="token language-css">        <span class="token selector"><span class="token class">.display</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line line-number" line="15"><span class="token style"><span class="token language-css">            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="16"><span class="token style"><span class="token language-css">            <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">40</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="17"><span class="token style"><span class="token language-css">            <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="18"><span class="token style"><span class="token language-css">            <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="19"><span class="token style"><span class="token language-css">            <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="20"><span class="token style"><span class="token language-css">        <span class="token punctuation">}</span>
</span></span></span><span class="code-line line-number" line="21"><span class="token style"><span class="token language-css">        <span class="token selector"><span class="token class">.buttons</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line line-number" line="22"><span class="token style"><span class="token language-css">            <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="23"><span class="token style"><span class="token language-css">            <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="24"><span class="token style"><span class="token language-css">            <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="25"><span class="token style"><span class="token language-css">        <span class="token punctuation">}</span>
</span></span></span><span class="code-line line-number" line="26"><span class="token style"><span class="token language-css">        <span class="token selector">button</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line line-number" line="27"><span class="token style"><span class="token language-css">            <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">40</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="28"><span class="token style"><span class="token language-css">            <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">16</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="29"><span class="token style"><span class="token language-css">        <span class="token punctuation">}</span>
</span></span></span><span class="code-line line-number" line="30"><span class="token style"><span class="token language-css">        <span class="token selector"><span class="token class">.history</span></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line line-number" line="31"><span class="token style"><span class="token language-css">            <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="32"><span class="token style"><span class="token language-css">            <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="33"><span class="token style"><span class="token language-css">            <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid <span class="token hexcode color">#eee</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="34"><span class="token style"><span class="token language-css">            <span class="token property">max-height</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token unit">px</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="35"><span class="token style"><span class="token language-css">            <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="36"><span class="token style"><span class="token language-css">        <span class="token punctuation">}</span>
</span></span></span><span class="code-line line-number" line="37"><span class="token style"><span class="token language-css">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="38"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="39"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="40">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>calculator<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="41">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>display<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>display<span class="token punctuation">"</span></span> <span class="token attr-name">readonly</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="42">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>buttons<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="43">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'7'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="44">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'8'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="45">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'9'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="46">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="47">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="48">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="49">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'6'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="50">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>×<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="51">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="52">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="53">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="54">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="55">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="56">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="57">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>=<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="58">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="59">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">clearDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="60">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="61">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>history<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>history<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="62">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>计算历史<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="63">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>historyList<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="64">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="65">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="66">
</span><span class="code-line line-number" line="67">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line line-number" line="68"><span class="token script"><span class="token language-javascript">        <span class="token comment">// 这里将补充JavaScript代码</span>
</span></span></span><span class="code-line line-number" line="69"><span class="token script"><span class="token language-javascript">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="70"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="71"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<h3>JavaScript部分（需要补充的代码）</h3>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
</span><span class="code-line line-number" line="2">    <span class="token comment">// 初始化application对象（模拟服务器端application）</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">application</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">        <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">application</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">            <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 存储计算历史</span>
</span><span class="code-line line-number" line="6">        <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9">    <span class="token comment">// 获取显示器和历史列表元素</span>
</span><span class="code-line line-number" line="10">    <span class="token keyword">const</span> display <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'display'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">    <span class="token keyword">const</span> historyList <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'historyList'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13">    <span class="token comment">// 1. 向显示器追加内容</span>
</span><span class="code-line line-number" line="14">    <span class="token keyword">function</span> <span class="token function">appendToDisplay</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">        display<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">+=</span> value<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18">    <span class="token comment">// 2. 清空显示器</span>
</span><span class="code-line line-number" line="19">    <span class="token keyword">function</span> <span class="token function">clearDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="20">        display<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="21">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23">    <span class="token comment">// 3. 执行计算</span>
</span><span class="code-line line-number" line="24">    <span class="token keyword">function</span> <span class="token function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="25">        <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="26">            <span class="token keyword">const</span> expression <span class="token operator">=</span> display<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="27">            <span class="token comment">// 安全评估表达式（替代eval）</span>
</span><span class="code-line line-number" line="28">            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">safeEval</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="29">            
</span><span class="code-line line-number" line="30">            <span class="token comment">// 更新显示器</span>
</span><span class="code-line line-number" line="31">            display<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> result<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="32">            
</span><span class="code-line line-number" line="33">            <span class="token comment">// 记录计算历史</span>
</span><span class="code-line line-number" line="34">            <span class="token keyword">const</span> calculation <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>expression<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="35">            <span class="token function">addToHistory</span><span class="token punctuation">(</span>calculation<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="36">            
</span><span class="code-line line-number" line="37">        <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="38">            display<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token string">'错误'</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="39">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="40">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="41">
</span><span class="code-line line-number" line="42">    <span class="token comment">// 4. 安全评估数学表达式</span>
</span><span class="code-line line-number" line="43">    <span class="token keyword">function</span> <span class="token function">safeEval</span><span class="token punctuation">(</span><span class="token parameter">expr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="44">        <span class="token comment">// 移除所有非数学表达式字符</span>
</span><span class="code-line line-number" line="45">        <span class="token keyword">const</span> sanitized <span class="token operator">=</span> expr<span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token char-class"><span class="token char-class-punctuation punctuation">[</span><span class="token char-class-negation operator">^</span><span class="token range">0<span class="token range-punctuation operator">-</span>9</span>+<span class="token escape">\-</span>*/.()<span class="token char-class-punctuation punctuation">]</span></span></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="46">        
</span><span class="code-line line-number" line="47">        <span class="token comment">// 使用Function构造器进行安全评估</span>
</span><span class="code-line line-number" line="48">        <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'return '</span> <span class="token operator">+</span> sanitized<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="49">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="50">
</span><span class="code-line line-number" line="51">    <span class="token comment">// 5. 添加到历史记录</span>
</span><span class="code-line line-number" line="52">    <span class="token keyword">function</span> <span class="token function">addToHistory</span><span class="token punctuation">(</span><span class="token parameter">calculation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="53">        <span class="token comment">// 添加到application对象</span>
</span><span class="code-line line-number" line="54">        application<span class="token punctuation">.</span><span class="token property-access">history</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>calculation<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="55">        
</span><span class="code-line line-number" line="56">        <span class="token comment">// 如果历史记录超过10条，移除最旧的一条</span>
</span><span class="code-line line-number" line="57">        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>application<span class="token punctuation">.</span><span class="token property-access">history</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="58">            application<span class="token punctuation">.</span><span class="token property-access">history</span><span class="token punctuation">.</span><span class="token method function property-access">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="59">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="60">        
</span><span class="code-line line-number" line="61">        <span class="token comment">// 更新历史记录显示</span>
</span><span class="code-line line-number" line="62">        <span class="token function">updateHistoryDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="63">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="64">
</span><span class="code-line line-number" line="65">    <span class="token comment">// 6. 更新历史记录显示</span>
</span><span class="code-line line-number" line="66">    <span class="token keyword">function</span> <span class="token function">updateHistoryDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="67">        <span class="token comment">// 清空现有历史列表</span>
</span><span class="code-line line-number" line="68">        historyList<span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="69">        
</span><span class="code-line line-number" line="70">        <span class="token comment">// 反向遍历历史记录（最新显示在最上面）</span>
</span><span class="code-line line-number" line="71">        application<span class="token punctuation">.</span><span class="token property-access">history</span><span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="72">            <span class="token keyword">const</span> li <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="73">            li<span class="token punctuation">.</span><span class="token property-access">textContent</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="74">            historyList<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="75">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="76">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="77">
</span><span class="code-line line-number" line="78">    <span class="token comment">// 7. 页面加载时显示历史记录</span>
</span><span class="code-line line-number" line="79">    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="80">        <span class="token function">updateHistoryDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="81">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="82"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</span></code></pre>
<ul>
<li>
<h4>功能说明</h4>
<blockquote>
<ol>
<li>
<h5><strong>计算器功能</strong>：</h5>
</li>
</ol>
<ul>
<li>
<p>支持基本四则运算（+、-、×、÷）</p>
</li>
<li>
<p>支持小数点和连续运算</p>
</li>
<li>
<p>具有清除功能（C按钮）</p>
</li>
</ul>
<ol start="2">
<li>
<h5><strong>application对象使用</strong>：</h5>
</li>
</ol>
<ul>
<li>
<p>使用<code>window.application</code>模拟服务器端application对象</p>
</li>
<li>
<p>存储计算历史记录（最多10条）</p>
</li>
<li>
<p>历史记录在页面刷新后仍然保留（模拟服务器端持久化）</p>
</li>
</ul>
<ol start="3">
<li>
<h5><strong>安全特性</strong>：</h5>
</li>
</ol>
<ul>
<li>
<p>使用<code>safeEval</code>函数替代直接<code>eval</code>，防止代码注入</p>
</li>
<li>
<p>对输入表达式进行过滤和清理</p>
</li>
</ul>
</blockquote>
</li>
</ul>
  </div>
  </body>
</html>